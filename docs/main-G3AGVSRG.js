import{b as ne,c as b,d as ae,e as fe}from"./chunk-THGDIQ4B.js";import{U as ge,V as ye,W as we,X as _e,Z as ve,a as K,aa as be,b as Q,ba as Ce,c as q,ca as Me,d as ee,e as te,f as oe,g as re,j as ie,l as se,n as g,p as le,q as de,s as me,t as ce,u as pe,v as ue,w as he}from"./chunk-PTQIEK6I.js";import{$ as j,Db as f,F,Hb as _,Pa as u,Ra as L,Ta as V,V as O,Va as W,Xa as $,Yb as v,_ as w,_a as z,a as R,b as A,cc as Y,ec as Z,fb as T,hb as I,ia as m,ja as B,la as U,lb as S,mb as d,n as y,nb as c,oa as J,ob as h,pa as G,r as P,sa as p,t as E,ta as l,ub as X,v as N,va as H}from"./chunk-NTYRYQ7B.js";var x=new U("JWT_OPTIONS"),Te=(()=>{class i{constructor(e=null){this.tokenGetter=e&&e.tokenGetter||function(){}}urlBase64Decode(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:{t+="==";break}case 3:{t+="=";break}default:throw new Error("Illegal base64url string!")}return this.b64DecodeUnicode(t)}b64decode(e){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="";if(e=String(e).replace(/=+$/,""),e.length%4===1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(let n=0,a,s,M=0;s=e.charAt(M++);~s&&(a=n%4?a*64+s:s,n++%4)?r+=String.fromCharCode(255&a>>(-2*n&6)):0)s=t.indexOf(s);return r}b64DecodeUnicode(e){return decodeURIComponent(Array.prototype.map.call(this.b64decode(e),t=>"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)).join(""))}decodeToken(e=this.tokenGetter()){return e instanceof Promise?e.then(t=>this._decodeToken(t)):this._decodeToken(e)}_decodeToken(e){if(!e||e==="")return null;let t=e.split(".");if(t.length!==3)throw new Error("The inspected token doesn't appear to be a JWT. Check to make sure it has three parts and see https://jwt.io for more.");let r=this.urlBase64Decode(t[1]);if(!r)throw new Error("Cannot decode the token.");return JSON.parse(r)}getTokenExpirationDate(e=this.tokenGetter()){return e instanceof Promise?e.then(t=>this._getTokenExpirationDate(t)):this._getTokenExpirationDate(e)}_getTokenExpirationDate(e){let t;if(t=this.decodeToken(e),!t||!t.hasOwnProperty("exp"))return null;let r=new Date(0);return r.setUTCSeconds(t.exp),r}isTokenExpired(e=this.tokenGetter(),t){return e instanceof Promise?e.then(r=>this._isTokenExpired(r,t)):this._isTokenExpired(e,t)}_isTokenExpired(e,t){if(!e||e==="")return!0;let r=this.getTokenExpirationDate(e);return t=t||0,r===null?!1:!(r.valueOf()>new Date().valueOf()+t*1e3)}getAuthScheme(e,t){return typeof e=="function"?e(t):e}}return i.\u0275fac=function(e){return new(e||i)(p(x))},i.\u0275prov=m({token:i,factory:i.\u0275fac}),i})(),Ee=i=>i instanceof Promise?N(()=>i):y(i),Pe=(()=>{class i{constructor(e,t,r){this.jwtHelper=t,this.document=r,this.standardPorts=["80","443"],this.tokenGetter=e.tokenGetter,this.headerName=e.headerName||"Authorization",this.authScheme=e.authScheme||e.authScheme===""?e.authScheme:"Bearer ",this.allowedDomains=e.allowedDomains||[],this.disallowedRoutes=e.disallowedRoutes||[],this.throwNoTokenError=e.throwNoTokenError||!1,this.skipWhenExpired=e.skipWhenExpired}isAllowedDomain(e){let t=new URL(e.url,this.document.location.origin);if(t.host===this.document.location.host)return!0;let r=`${t.hostname}${t.port&&!this.standardPorts.includes(t.port)?":"+t.port:""}`;return this.allowedDomains.findIndex(n=>typeof n=="string"?n===r:n instanceof RegExp?n.test(r):!1)>-1}isDisallowedRoute(e){let t=new URL(e.url,this.document.location.origin);return this.disallowedRoutes.findIndex(r=>{if(typeof r=="string"){let n=new URL(r,this.document.location.origin);return n.hostname===t.hostname&&n.pathname===t.pathname}return r instanceof RegExp?r.test(e.url):!1})>-1}handleInterception(e,t,r){let n=this.jwtHelper.getAuthScheme(this.authScheme,t);if(!e&&this.throwNoTokenError)throw new Error("Could not get token from tokenGetter function.");let a=y(!1);return this.skipWhenExpired&&(a=e?Ee(this.jwtHelper.isTokenExpired(e)):y(!0)),e?a.pipe(P(s=>s&&this.skipWhenExpired?t.clone():t.clone({setHeaders:{[this.headerName]:`${n}${e}`}})),E(s=>r.handle(s))):r.handle(t)}intercept(e,t){if(!this.isAllowedDomain(e)||this.isDisallowedRoute(e))return t.handle(e);let r=this.tokenGetter(e);return Ee(r).pipe(E(n=>this.handleInterception(n,e,t)))}}return i.\u0275fac=function(e){return new(e||i)(p(x),p(Te),p(v))},i.\u0275prov=m({token:i,factory:i.\u0275fac}),i})(),Ie=(()=>{class i{constructor(e){if(e)throw new Error("JwtModule is already loaded. It should only be imported in your application's main module.")}static forRoot(e){return{ngModule:i,providers:[{provide:Q,useClass:Pe,multi:!0},e.jwtOptionsProvider||{provide:x,useValue:e.config},Te]}}}return i.\u0275fac=function(e){return new(e||i)(p(i,12))},i.\u0275mod=j({type:i}),i.\u0275inj=B({}),i})();var Se=(()=>{let o=class o{constructor(){this.title="approval-flow-application"}};o.\u0275fac=function(r){return new(r||o)},o.\u0275cmp=w({type:o,selectors:[["app-root"]],standalone:!0,features:[_],decls:1,vars:0,template:function(r,n){r&1&&h(0,"router-outlet")},dependencies:[ne,Ie],styles:["table[_ngcontent-%COMP%]{width:100%}"]});let i=o;return i})();var xe=(()=>{let o=class o{constructor(){this.http=l(K),this.router=l(b),this.urlApi="http://localhost:3000"}login(t){return this.http.post(`${this.urlApi}/login`,t).pipe(F(1))}logout(){return this.http.get(`${this.urlApi}/logout`)}};o.\u0275fac=function(r){return new(r||o)},o.\u0275prov=m({token:o,factory:o.\u0275fac,providedIn:"root"});let i=o;return i})();function Ne(i,o){i&1&&(d(0,"mat-hint",9),f(1," Esse campo \xE9 obrigat\xF3rio, preencha corretamente. "),c())}function Fe(i,o){i&1&&(d(0,"mat-hint",9),f(1," Esse campo \xE9 obrigat\xF3rio, preencha corretamente. "),c())}var ke=(()=>{let o=class o{constructor(){this.formBuilder=l(ue),this.loginService=l(xe),this.router=l(b),this.form=this.formBuilder.nonNullable.group({username:["",[g.email,g.required]],password:["",[g.required,g.minLength(6)]]})}navigateToRoutes(t){t.role==="requester"?this.router.navigateByUrl("solicitations"):t.role==="warehouseman"?this.router.navigateByUrl("warehouseman"):t.role==="admin"&&this.router.navigateByUrl("admins")}onSubmit(){this.form.valid&&this.loginService.login(this.form.getRawValue()).subscribe(t=>{localStorage.setItem("access_token",t.token),this.navigateToRoutes(t.user)})}};o.\u0275fac=function(r){return new(r||o)},o.\u0275cmp=w({type:o,selectors:[["app-login"]],standalone:!0,features:[_],decls:13,vars:4,consts:[[1,"login__mat__card"],[1,"login__card__content"],[1,"login__title"],["autocomplete","off",1,"login__form",3,"formGroup","ngSubmit"],[1,"login__fields"],["matInput","","placeholder","E-mail","type","email","formControlName","username"],["class","login__error__message"],["matInput","","placeholder","Senha","type","password","formControlName","password"],["color","primary","mat-raised-button","","type","submit",1,"login__button",3,"disabled"],[1,"login__error__message"]],template:function(r,n){r&1&&(d(0,"mat-card",0)(1,"mat-card-content",1)(2,"mat-card-title",2),f(3,"Fa\xE7a o login"),c(),d(4,"form",3),X("ngSubmit",function(){return n.onSubmit()}),d(5,"mat-form-field",4),h(6,"input",5),T(7,Ne,2,0,"mat-hint",6),c(),d(8,"mat-form-field",4),h(9,"input",7),T(10,Fe,2,0,"mat-hint",6),c(),d(11,"button",8),f(12," Acessar "),c()()()()),r&2&&(u(4),I("formGroup",n.form),u(3),S(7,n.form.controls.username.invalid&&n.form.controls.username.touched?7:-1),u(3),S(10,n.form.controls.password.invalid&&n.form.controls.password.touched?10:-1),u(),I("disabled",!n.form.valid))},dependencies:[Y,_e,ge,we,ye,be,Ce,Me,he,me,se,le,de,ce,pe,ve],styles:[".login__title[_ngcontent-%COMP%]{border-bottom:3px solid #009688;padding:1.3rem;font-size:1.5rem;-webkit-font-smoothing:antialiased;font-weight:600;color:#009688;margin-bottom:2rem}.login__mat__card[_ngcontent-%COMP%]{width:100%;height:100vh;display:flex;justify-content:center;align-items:center}.login__card__content[_ngcontent-%COMP%]{border:1px solid #e0e0e0;border-radius:5px;padding:2rem!important;display:flex;flex-direction:column;justify-content:center;min-width:30vw;text-align:center}.login__form[_ngcontent-%COMP%]{display:flex;flex-direction:column}.login__fields[_ngcontent-%COMP%]{padding-bottom:2rem}.login__button[_ngcontent-%COMP%]{width:100%}.login__error__message[_ngcontent-%COMP%]{color:red;font-size:.8rem;padding-bottom:1rem}"]});let i=o;return i})();var De=[{path:"admins",loadChildren:()=>import("./chunk-ROUA3NMA.js")},{path:"warehouseman",loadChildren:()=>import("./chunk-HFY4XTPP.js")},{path:"solicitations",loadChildren:()=>import("./chunk-XFGWVYVB.js")},{path:"**",pathMatch:"full",redirectTo:"login"},{path:"login",component:ke}];var Oe="@",je=(()=>{let o=class o{constructor(t,r,n,a,s){this.doc=t,this.delegate=r,this.zone=n,this.animationType=a,this.moduleImpl=s,this._rendererFactoryPromise=null,this.scheduler=l(V,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-LSUIFSU2.js")).catch(r=>{throw new O(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:n})=>{this._engine=r(this.animationType,this.doc,this.scheduler);let a=new n(this.delegate,this._engine,this.zone);return this.delegate=a,a})}createRenderer(t,r){let n=this.delegate.createRenderer(t,r);if(n.\u0275type===0)return n;typeof n.throwOnSyntheticProps=="boolean"&&(n.throwOnSyntheticProps=!1);let a=new k(n);return r?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(s=>{let M=s.createRenderer(t,r);a.use(M)}).catch(s=>{a.use(n)}),a}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};o.\u0275fac=function(r){L()},o.\u0275prov=m({token:o,factory:o.\u0275fac});let i=o;return i})(),k=class{constructor(o){this.delegate=o,this.replay=[],this.\u0275type=1}use(o){if(this.delegate=o,this.replay!==null){for(let e of this.replay)e(o);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(o,e){return this.delegate.createElement(o,e)}createComment(o){return this.delegate.createComment(o)}createText(o){return this.delegate.createText(o)}get destroyNode(){return this.delegate.destroyNode}appendChild(o,e){this.delegate.appendChild(o,e)}insertBefore(o,e,t,r){this.delegate.insertBefore(o,e,t,r)}removeChild(o,e,t){this.delegate.removeChild(o,e,t)}selectRootElement(o,e){return this.delegate.selectRootElement(o,e)}parentNode(o){return this.delegate.parentNode(o)}nextSibling(o){return this.delegate.nextSibling(o)}setAttribute(o,e,t,r){this.delegate.setAttribute(o,e,t,r)}removeAttribute(o,e,t){this.delegate.removeAttribute(o,e,t)}addClass(o,e){this.delegate.addClass(o,e)}removeClass(o,e){this.delegate.removeClass(o,e)}setStyle(o,e,t,r){this.delegate.setStyle(o,e,t,r)}removeStyle(o,e,t){this.delegate.removeStyle(o,e,t)}setProperty(o,e,t){this.shouldReplay(e)&&this.replay.push(r=>r.setProperty(o,e,t)),this.delegate.setProperty(o,e,t)}setValue(o,e){this.delegate.setValue(o,e)}listen(o,e,t){return this.shouldReplay(e)&&this.replay.push(r=>r.listen(o,e,t)),this.delegate.listen(o,e,t)}shouldReplay(o){return this.replay!==null&&o.startsWith(Oe)}};function Re(i="animations"){return $("NgAsyncAnimations"),H([{provide:W,useFactory:(o,e,t)=>new je(o,e,t,i),deps:[v,oe,z]},{provide:G,useValue:i==="noop"?"NoopAnimations":"BrowserAnimations"}])}var Ae=(i,o)=>{let e=l(J),t=Z(e)?localStorage.getItem("access_token"):"";return t&&(i=i.clone({setHeaders:{Authorization:`Bearer ${t}`}})),o(i)};var D={providers:[ie(),Re(),ae(De),q(te(),ee([Ae]))]};re(Se,A(R({},D),{providers:[...D.providers,fe()]})).catch(i=>console.error(i));
