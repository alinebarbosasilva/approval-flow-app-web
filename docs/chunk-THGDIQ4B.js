import{h as qr,k as Wr,m as Zr}from"./chunk-PTQIEK6I.js";import{$a as Nr,Aa as Re,B as le,C as be,Ca as Dr,E as yt,F as ue,G as br,Gb as jr,Hb as Lr,I as qe,J as V,K as _t,L as Rr,Lb as Fr,M as Mr,Mb as Hr,Nb as zr,Ob as Br,Q as xr,Qb as Et,R as B,S as Ir,U as R,V as T,W as Q,Wa as Mt,X as wt,Yb as Ke,Z as bt,Za as xt,Zb as Ye,_ as Er,_a as Qe,a as f,aa as We,b as D,cb as Or,d as Sr,db as Pr,e as Cr,eb as $r,f as kr,fa as Rt,h as vt,i as St,ia as M,j as ee,k as $,ka as Ar,l as te,la as N,m as F,n as m,o as we,ob as Ur,p as yr,q as _r,r as w,s as Ct,sa as Tr,t as U,ta as p,u as wr,ub as It,v as kt,va as Ze,xa as Ge,ya as re,z as he,za as Ve}from"./chunk-NTYRYQ7B.js";var Je=new N("ngx-mask config"),Gr=new N("new ngx-mask config"),Vr=new N("initial ngx-mask config"),Ui={suffix:"",prefix:"",thousandSeparator:" ",decimalMarker:[".",","],clearIfNotMatch:!1,showTemplate:!1,showMaskTyped:!1,placeHolderCharacter:"_",dropSpecialCharacters:!0,hiddenInput:void 0,shownMaskExpression:"",separatorLimit:"",allowNegativeNumbers:!1,validation:!0,specialCharacters:["-","/","(",")",".",":"," ","+",",","@","[","]",'"',"'"],leadZeroDateTime:!1,apm:!1,leadZero:!1,keepCharacterPositions:!1,triggerOnMaskChange:!1,inputTransformFn:i=>i,outputTransformFn:i=>i,maskFilled:new Q,patterns:{0:{pattern:new RegExp("\\d")},9:{pattern:new RegExp("\\d"),optional:!0},X:{pattern:new RegExp("\\d"),symbol:"*"},A:{pattern:new RegExp("[a-zA-Z0-9]")},S:{pattern:new RegExp("[a-zA-Z]")},U:{pattern:new RegExp("[A-Z]")},L:{pattern:new RegExp("[a-z]")},d:{pattern:new RegExp("\\d")},m:{pattern:new RegExp("\\d")},M:{pattern:new RegExp("\\d")},H:{pattern:new RegExp("\\d")},h:{pattern:new RegExp("\\d")},s:{pattern:new RegExp("\\d")}}},ji=["Hh:m0:s0","Hh:m0","m0:s0"],Li=["percent","Hh","s0","m0","separator","d0/M0/0000","d0/M0","d0","M0"],Fi=(()=>{let r=class r{constructor(){this._config=p(Je),this.dropSpecialCharacters=this._config.dropSpecialCharacters,this.hiddenInput=this._config.hiddenInput,this.clearIfNotMatch=this._config.clearIfNotMatch,this.specialCharacters=this._config.specialCharacters,this.patterns=this._config.patterns,this.prefix=this._config.prefix,this.suffix=this._config.suffix,this.thousandSeparator=this._config.thousandSeparator,this.decimalMarker=this._config.decimalMarker,this.showMaskTyped=this._config.showMaskTyped,this.placeHolderCharacter=this._config.placeHolderCharacter,this.validation=this._config.validation,this.separatorLimit=this._config.separatorLimit,this.allowNegativeNumbers=this._config.allowNegativeNumbers,this.leadZeroDateTime=this._config.leadZeroDateTime,this.leadZero=this._config.leadZero,this.apm=this._config.apm,this.inputTransformFn=this._config.inputTransformFn,this.outputTransformFn=this._config.outputTransformFn,this.keepCharacterPositions=this._config.keepCharacterPositions,this._shift=new Set,this.plusOnePosition=!1,this.maskExpression="",this.actualValue="",this.showKeepCharacterExp="",this.shownMaskExpression="",this.deletedSpecialCharacter=!1,this._formatWithSeparators=(e,t,n,a)=>{let c=[],l="";if(Array.isArray(n)){let S=new RegExp(n.map(C=>"[\\^$.|?*+()".indexOf(C)>=0?`\\${C}`:C).join("|"));c=e.split(S),l=e.match(S)?.[0]??""}else c=e.split(n),l=n;let o=c.length>1?`${l}${c[1]}`:"",h=c[0]??"",u=this.separatorLimit.replace(/\s/g,"");u&&+u&&(h[0]==="-"?h=`-${h.slice(1,h.length).slice(0,u.length)}`:h=h.slice(0,u.length));let d=/(\d+)(\d{3})/;for(;t&&d.test(h);)h=h.replace(d,"$1"+t+"$2");return a===void 0?h+o:a===0?h:h+o.substring(0,a+1)},this.percentage=e=>{let t=e.replace(",","."),n=Number(t);return!isNaN(n)&&n>=0&&n<=100},this.getPrecision=e=>{let t=e.split(".");return t.length>1?Number(t[t.length-1]):1/0},this.checkAndRemoveSuffix=e=>{for(let t=this.suffix?.length-1;t>=0;t--){let n=this.suffix.substring(t,this.suffix?.length);if(e.includes(n)&&t!==this.suffix?.length-1&&(t-1<0||!e.includes(this.suffix.substring(t-1,this.suffix?.length))))return e.replace(n,"")}return e},this.checkInputPrecision=(e,t,n)=>{if(t<1/0){if(Array.isArray(n)){let o=n.find(h=>h!==this.thousandSeparator);n=o||n[0]}let a=new RegExp(this._charToRegExpExpression(n)+`\\d{${t}}.*$`),c=e.match(a),l=(c&&c[0]?.length)??0;if(l-1>t){let o=l-1-t;e=e.substring(0,e.length-o)}t===0&&this._compareOrIncludes(e[e.length-1],n,this.thousandSeparator)&&(e=e.substring(0,e.length-1))}return e}}applyMaskWithPattern(e,t){let[n,a]=t;return this.customPattern=a,this.applyMask(e,n)}applyMask(e,t,n=0,a=!1,c=!1,l=()=>{}){if(!t||typeof e!="string")return"";let o=0,h="",u=!1,d=!1,S=1,C=!1;e.slice(0,this.prefix.length)===this.prefix&&(e=e.slice(this.prefix.length,e.length)),this.suffix&&e?.length>0&&(e=this.checkAndRemoveSuffix(e)),e==="("&&this.prefix&&(e="");let _=e.toString().split("");if(this.allowNegativeNumbers&&e.slice(o,o+1)==="-"&&(h+=e.slice(o,o+1)),t==="IP"){let k=e.split(".");this.ipError=this._validIP(k),t="099.099.099.099"}let I=[];for(let k=0;k<e.length;k++)e[k]?.match("\\d")&&I.push(e[k]??"");if(t==="CPF_CNPJ"&&(this.cpfCnpjError=I.length!==11&&I.length!==14,I.length>11?t="00.000.000/0000-00":t="000.000.000-00"),t.startsWith("percent")){if(e.match("[a-z]|[A-Z]")||e.match(/[-!$%^&*()_+|~=`{}\[\]:";'<>?,\/.]/)&&!c){e=this._stripToDecimal(e);let P=this.getPrecision(t);e=this.checkInputPrecision(e,P,this.decimalMarker)}let k=typeof this.decimalMarker=="string"?this.decimalMarker:".";if(e.indexOf(k)>0&&!this.percentage(e.substring(0,e.indexOf(k)))){let P=e.substring(0,e.indexOf(k)-1);this.allowNegativeNumbers&&e.slice(o,o+1)==="-"&&!c&&(P=e.substring(0,e.indexOf(k))),e=`${P}${e.substring(e.indexOf(k),e.length)}`}let g="";this.allowNegativeNumbers&&e.slice(o,o+1)==="-"?g=e.slice(o+1,o+e.length):g=e,this.percentage(g)?h=this._splitPercentZero(e):h=this._splitPercentZero(e.substring(0,e.length-1))}else if(t.startsWith("separator")){(e.match("[w\u0430-\u044F\u0410-\u042F]")||e.match("[\u0401\u0451\u0410-\u044F]")||e.match("[a-z]|[A-Z]")||e.match(/[-@#!$%\\^&*()_£¬'+|~=`{}\]:";<>.?/]/)||e.match("[^A-Za-z0-9,]"))&&(e=this._stripToDecimal(e));let k=this.getPrecision(t),g=Array.isArray(this.decimalMarker)?".":this.decimalMarker;k===0?e=this.allowNegativeNumbers?e.length>2&&e[0]==="-"&&e[1]==="0"&&e[2]!==this.thousandSeparator&&e[2]!==","&&e[2]!=="."?"-"+e.slice(2,e.length):e[0]==="0"&&e.length>1&&e[1]!==this.thousandSeparator&&e[1]!==","&&e[1]!=="."?e.slice(1,e.length):e:e.length>1&&e[0]==="0"&&e[1]!==this.thousandSeparator&&e[1]!==","&&e[1]!=="."?e.slice(1,e.length):e:(e[0]===g&&e.length>1&&(e="0"+e.slice(0,e.length+1),this.plusOnePosition=!0),e[0]==="0"&&e[1]!==g&&e[1]!==this.thousandSeparator&&(e=e.length>1?e.slice(0,1)+g+e.slice(1,e.length+1):e,this.plusOnePosition=!0),this.allowNegativeNumbers&&e[0]==="-"&&(e[1]===g||e[1]==="0")&&(e=e[1]===g&&e.length>2?e.slice(0,1)+"0"+e.slice(1,e.length):e[1]==="0"&&e.length>2&&e[2]!==g?e.slice(0,2)+g+e.slice(2,e.length):e,this.plusOnePosition=!0)),c&&(e[0]==="0"&&e[1]===this.decimalMarker&&(e[n]==="0"||e[n]===this.decimalMarker)&&(e=e.slice(2,e.length)),e[0]==="-"&&e[1]==="0"&&e[2]===this.decimalMarker&&(e[n]==="0"||e[n]===this.decimalMarker)&&(e="-"+e.slice(3,e.length)),e=this._compareOrIncludes(e[e.length-1],this.decimalMarker,this.thousandSeparator)?e.slice(0,e.length-1):e);let P=this._charToRegExpExpression(this.thousandSeparator),b='@#!$%^&*()_+|~=`{}\\[\\]:\\s,\\.";<>?\\/'.replace(P,"");if(Array.isArray(this.decimalMarker))for(let z of this.decimalMarker)b=b.replace(this._charToRegExpExpression(z),"");else b=b.replace(this._charToRegExpExpression(this.decimalMarker),"");let G=new RegExp("["+b+"]");e.match(G)&&(e=e.substring(0,e.length-1)),e=this.checkInputPrecision(e,k,this.decimalMarker);let H=e.replace(new RegExp(P,"g"),"");h=this._formatWithSeparators(H,this.thousandSeparator,this.decimalMarker,k);let ce=h.indexOf(",")-e.indexOf(","),E=h.length-e.length;if(E>0&&h[n]!==this.thousandSeparator){d=!0;let z=0;do this._shift.add(n+z),z++;while(z<E)}else h[n-1]===this.decimalMarker||E===-4||E===-3||h[n]===","?(this._shift.clear(),this._shift.add(n-1)):ce!==0&&n>0&&!(h.indexOf(",")>=n&&n>3)||!(h.indexOf(".")>=n&&n>3)&&E<=0?(this._shift.clear(),d=!0,S=E,n+=E,this._shift.add(n)):this._shift.clear()}else for(let k=0,g=_[0];k<_.length&&o!==t.length;k++,g=_[k]??""){let P="*"in this.patterns;if(this._checkSymbolMask(g,t[o]??"")&&t[o+1]==="?")h+=g,o+=2;else if(t[o+1]==="*"&&u&&this._checkSymbolMask(g,t[o+2]??""))h+=g,o+=3,u=!1;else if(this._checkSymbolMask(g,t[o]??"")&&t[o+1]==="*"&&!P)h+=g,u=!0;else if(t[o+1]==="?"&&this._checkSymbolMask(g,t[o+2]??""))h+=g,o+=3;else if(this._checkSymbolMask(g,t[o]??"")){if(t[o]==="H"&&(this.apm?Number(g)>9:Number(g)>2)){n=this.leadZeroDateTime?n:n+1,o+=1,this._shiftStep(t,o,_.length),k--,this.leadZeroDateTime&&(h+="0");continue}if(t[o]==="h"&&(this.apm?h.length===1&&Number(h)>1||h==="1"&&Number(g)>2||e.slice(o-1,o).length===1&&Number(e.slice(o-1,o))>2||e.slice(o-1,o)==="1"&&Number(g)>2:h==="2"&&Number(g)>3||(h.slice(o-2,o)==="2"||h.slice(o-3,o)==="2"||h.slice(o-4,o)==="2"||h.slice(o-1,o)==="2")&&Number(g)>3&&o>10)){n=n+1,o+=1,k--;continue}if((t[o]==="m"||t[o]==="s")&&Number(g)>5){n=this.leadZeroDateTime?n:n+1,o+=1,this._shiftStep(t,o,_.length),k--,this.leadZeroDateTime&&(h+="0");continue}let b=31,G=e[o],H=e[o+1],ce=e[o+2],E=e[o-1],z=e[o-2],Ei=e[o-3],X=e.slice(o-3,o-1),Be=e.slice(o-1,o+1),_e=e.slice(o,o+2),gt=e.slice(o-2,o);if(t[o]==="d"){let vr=t.slice(0,2)==="M0",mt=t.slice(0,2)==="M0"&&this.specialCharacters.includes(z);if(Number(g)>3&&this.leadZeroDateTime||!vr&&(Number(_e)>b||Number(Be)>b||this.specialCharacters.includes(H))||(mt?Number(Be)>b||!this.specialCharacters.includes(G)&&this.specialCharacters.includes(ce)||this.specialCharacters.includes(G):Number(_e)>b||this.specialCharacters.includes(H))){n=this.leadZeroDateTime?n:n+1,o+=1,this._shiftStep(t,o,_.length),k--,this.leadZeroDateTime&&(h+="0");continue}}if(t[o]==="M"){let mt=o===0&&(Number(g)>2||Number(_e)>12||this.specialCharacters.includes(H)),Ai=t.slice(o+2,o+3),Ti=X.includes(Ai)&&(this.specialCharacters.includes(z)&&Number(Be)>12&&!this.specialCharacters.includes(G)||this.specialCharacters.includes(G)||this.specialCharacters.includes(Ei)&&Number(gt)>12&&!this.specialCharacters.includes(E)||this.specialCharacters.includes(E)),Di=Number(X)<=b&&!this.specialCharacters.includes(X)&&this.specialCharacters.includes(E)&&(Number(_e)>12||this.specialCharacters.includes(H)),Ni=Number(_e)>12&&o===5||this.specialCharacters.includes(H)&&o===5,Oi=Number(X)>b&&!this.specialCharacters.includes(X)&&!this.specialCharacters.includes(gt)&&Number(gt)>12,Pi=Number(X)<=b&&!this.specialCharacters.includes(X)&&!this.specialCharacters.includes(E)&&Number(Be)>12;if(Number(g)>1&&this.leadZeroDateTime||mt||Ti||Pi||Oi||Di||Ni&&!this.leadZeroDateTime){n=this.leadZeroDateTime?n:n+1,o+=1,this._shiftStep(t,o,_.length),k--,this.leadZeroDateTime&&(h+="0");continue}}h+=g,o++}else g===" "&&t[o]===" "||g==="/"&&t[o]==="/"?(h+=g,o++):this.specialCharacters.indexOf(t[o]??"")!==-1?(h+=t[o],o++,this._shiftStep(t,o,_.length),k--):t[o]==="9"&&this.showMaskTyped?this._shiftStep(t,o,_.length):this.patterns[t[o]??""]&&this.patterns[t[o]??""]?.optional?(_[o]&&t!=="099.099.099.099"&&t!=="000.000.000-00"&&t!=="00.000.000/0000-00"&&!t.match(/^9+\.0+$/)&&!this.patterns[t[o]??""]?.optional&&(h+=_[o]),t.includes("9*")&&t.includes("0*")&&o++,o++,k--):this.maskExpression[o+1]==="*"&&this._findSpecialChar(this.maskExpression[o+2]??"")&&this._findSpecialChar(g)===this.maskExpression[o+2]&&u||this.maskExpression[o+1]==="?"&&this._findSpecialChar(this.maskExpression[o+2]??"")&&this._findSpecialChar(g)===this.maskExpression[o+2]&&u?(o+=3,h+=g):this.showMaskTyped&&this.specialCharacters.indexOf(g)<0&&g!==this.placeHolderCharacter&&this.placeHolderCharacter.length===1&&(C=!0)}h.length+1===t.length&&this.specialCharacters.indexOf(t[t.length-1]??"")!==-1&&(h+=t[t.length-1]);let A=n+1;for(;this._shift.has(A);)S++,A++;let Z=a&&!t.startsWith("separator")?o:this._shift.has(n)?S:0;C&&Z--,l(Z,d),S<0&&this._shift.clear();let ye=!1;c&&(ye=_.every(k=>this.specialCharacters.includes(k)));let oe=`${this.prefix}${ye?"":h}${this.showMaskTyped?"":this.suffix}`;if(h.length===0&&(oe=this.dropSpecialCharacters?`${h}`:`${this.prefix}${h}`),h.includes("-")&&this.prefix&&this.allowNegativeNumbers){if(c&&h==="-")return"";oe=`-${this.prefix}${h.split("-").join("")}${this.suffix}`}return oe}_findDropSpecialChar(e){return Array.isArray(this.dropSpecialCharacters)?this.dropSpecialCharacters.find(t=>t===e):this._findSpecialChar(e)}_findSpecialChar(e){return this.specialCharacters.find(t=>t===e)}_checkSymbolMask(e,t){return this.patterns=this.customPattern?this.customPattern:this.patterns,(this.patterns[t]?.pattern&&this.patterns[t]?.pattern.test(e))??!1}_stripToDecimal(e){return e.split("").filter((t,n)=>{let a=typeof this.decimalMarker=="string"?t===this.decimalMarker:this.decimalMarker.includes(t);return t.match("^-?\\d")||t===this.thousandSeparator||a||t==="-"&&n===0&&this.allowNegativeNumbers}).join("")}_charToRegExpExpression(e){return e&&(e===" "?"\\s":"[\\^$.|?*+()".indexOf(e)>=0?`\\${e}`:e)}_shiftStep(e,t,n){let a=/[*?]/g.test(e.slice(0,t))?n:t;this._shift.add(a+this.prefix.length||0)}_compareOrIncludes(e,t,n){return Array.isArray(t)?t.filter(a=>a!==n).includes(e):e===t}_validIP(e){return!(e.length===4&&!e.some((t,n)=>e.length!==n+1?t===""||Number(t)>255:t===""||Number(t.substring(0,3))>255))}_splitPercentZero(e){let t=typeof this.decimalMarker=="string"?e.indexOf(this.decimalMarker):e.indexOf(".");if(t===-1){let n=parseInt(e,10);return isNaN(n)?"":n.toString()}else{let n=parseInt(e.substring(0,t),10),a=e.substring(t+1),c=isNaN(n)?"":n.toString(),l=typeof this.decimalMarker=="string"?this.decimalMarker:".";return c===""?"":c+l+a}}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=M({token:r,factory:r.\u0275fac});let i=r;return i})(),At=(()=>{let r=class r extends Fi{constructor(){super(...arguments),this.isNumberValue=!1,this.maskIsShown="",this.selStart=null,this.selEnd=null,this.writingValue=!1,this.maskChanged=!1,this._maskExpressionArray=[],this.triggerOnMaskChange=!1,this._previousValue="",this._currentValue="",this._emitValue=!1,this.onChange=e=>{},this._elementRef=p(Rt,{optional:!0}),this.document=p(Ke),this._config=p(Je),this._renderer=p(Mt,{optional:!0})}applyMask(e,t,n=0,a=!1,c=!1,l=()=>{}){if(!t)return e!==this.actualValue?this.actualValue:e;if(this.maskIsShown=this.showMaskTyped?this.showMaskInInput():"",this.maskExpression==="IP"&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(e||"#")),this.maskExpression==="CPF_CNPJ"&&this.showMaskTyped&&(this.maskIsShown=this.showMaskInInput(e||"#")),!e&&this.showMaskTyped)return this.formControlResult(this.prefix),this.prefix+this.maskIsShown+this.suffix;let o=e&&typeof this.selStart=="number"?e[this.selStart]??"":"",h="";if(this.hiddenInput!==void 0&&!this.writingValue){let C=e&&e.length===1?e.split(""):this.actualValue.split("");typeof this.selStart=="object"&&typeof this.selEnd=="object"?(this.selStart=Number(this.selStart),this.selEnd=Number(this.selEnd)):e!==""&&C.length?typeof this.selStart=="number"&&typeof this.selEnd=="number"&&(e.length>C.length?C.splice(this.selStart,0,o):e.length<C.length&&(C.length-e.length===1?c?C.splice(this.selStart-1,1):C.splice(e.length-1,1):C.splice(this.selStart,this.selEnd-this.selStart))):C=[],this.showMaskTyped&&(this.hiddenInput||(e=this.removeMask(e))),h=this.actualValue.length&&C.length<=e.length?this.shiftTypedSymbols(C.join("")):e}if(a&&(this.hiddenInput||!this.hiddenInput)&&(h=e),c&&this.specialCharacters.indexOf(this.maskExpression[n]??"")!==-1&&this.showMaskTyped&&(h=this._currentValue),this.deletedSpecialCharacter&&n&&(this.specialCharacters.includes(this.actualValue.slice(n,n+1))?n=n+1:t.slice(n-1,n+1)!=="M0"&&(n=n-2),this.deletedSpecialCharacter=!1),this.showMaskTyped&&this.placeHolderCharacter.length===1&&!this.leadZeroDateTime&&(e=this.removeMask(e)),this.maskChanged?h=e:h=h&&h.length?h:e,this.showMaskTyped&&this.keepCharacterPositions&&this.actualValue&&!a){let C=this.dropSpecialCharacters?this.removeMask(this.actualValue):this.actualValue;return this.formControlResult(C),this.actualValue?this.actualValue:this.prefix+this.maskIsShown+this.suffix}let u=super.applyMask(h,t,n,a,c,l);if(this.actualValue=this.getActualValue(u),this.thousandSeparator==="."&&this.decimalMarker==="."&&(this.decimalMarker=","),this.maskExpression.startsWith("separator")&&this.dropSpecialCharacters===!0&&(this.specialCharacters=this.specialCharacters.filter(C=>!this._compareOrIncludes(C,this.decimalMarker,this.thousandSeparator))),(u||u==="")&&(this._previousValue=this._currentValue,this._currentValue=u,this._emitValue=this._previousValue!==this._currentValue||this.maskChanged||this._previousValue===this._currentValue&&a),this._emitValue&&this.formControlResult(u),!this.showMaskTyped||this.showMaskTyped&&this.hiddenInput)return this.hiddenInput?c?this.hideInput(u,this.maskExpression):this.hideInput(u,this.maskExpression)+this.maskIsShown.slice(u.length):u;let d=u.length,S=this.prefix+this.maskIsShown+this.suffix;if(this.maskExpression.includes("H")){let C=this._numberSkipedSymbols(u);return u+S.slice(d+C)}else if(this.maskExpression==="IP"||this.maskExpression==="CPF_CNPJ")return u+S;return u+S.slice(d)}_numberSkipedSymbols(e){let t=/(^|\D)(\d\D)/g,n=t.exec(e),a=0;for(;n!=null;)a+=1,n=t.exec(e);return a}applyValueChanges(e,t,n,a=()=>{}){let c=this._elementRef?.nativeElement;c&&(c.value=this.applyMask(c.value,this.maskExpression,e,t,n,a),c!==this._getActiveElement()&&this.clearIfNotMatchFn())}hideInput(e,t){return e.split("").map((n,a)=>this.patterns&&this.patterns[t[a]??""]&&this.patterns[t[a]??""]?.symbol?this.patterns[t[a]??""]?.symbol:n).join("")}getActualValue(e){let t=e.split("").filter((n,a)=>{let c=this.maskExpression[a]??"";return this._checkSymbolMask(n,c)||this.specialCharacters.includes(c)&&n===c});return t.join("")===e?t.join(""):e}shiftTypedSymbols(e){let t="";return(e&&e.split("").map((a,c)=>{if(this.specialCharacters.includes(e[c+1]??"")&&e[c+1]!==this.maskExpression[c+1])return t=a,e[c+1];if(t.length){let l=t;return t="",l}return a})||[]).join("")}numberToString(e){return!e&&e!==0||this.maskExpression.startsWith("separator")&&(this.leadZero||!this.dropSpecialCharacters)||this.maskExpression.startsWith("separator")&&this.separatorLimit.length>14&&String(e).length>14?String(e):Number(e).toLocaleString("fullwide",{useGrouping:!1,maximumFractionDigits:20}).replace("/-/","-")}showMaskInInput(e){if(this.showMaskTyped&&this.shownMaskExpression){if(this.maskExpression.length!==this.shownMaskExpression.length)throw new Error("Mask expression must match mask placeholder length");return this.shownMaskExpression}else if(this.showMaskTyped){if(e){if(this.maskExpression==="IP")return this._checkForIp(e);if(this.maskExpression==="CPF_CNPJ")return this._checkForCpfCnpj(e)}return this.placeHolderCharacter.length===this.maskExpression.length?this.placeHolderCharacter:this.maskExpression.replace(/\w/g,this.placeHolderCharacter)}return""}clearIfNotMatchFn(){let e=this._elementRef?.nativeElement;e&&this.clearIfNotMatch&&this.prefix.length+this.maskExpression.length+this.suffix.length!==e.value.replace(this.placeHolderCharacter,"").length&&(this.formElementProperty=["value",""],this.applyMask("",this.maskExpression))}set formElementProperty([e,t]){!this._renderer||!this._elementRef||Promise.resolve().then(()=>this._renderer?.setProperty(this._elementRef?.nativeElement,e,t))}checkDropSpecialCharAmount(e){return e.split("").filter(n=>this._findDropSpecialChar(n)).length}removeMask(e){return this._removeMask(this._removeSuffix(this._removePrefix(e)),this.specialCharacters.concat("_").concat(this.placeHolderCharacter))}_checkForIp(e){if(e==="#")return`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`;let t=[];for(let n=0;n<e.length;n++){let a=e[n]??"";a&&a.match("\\d")&&t.push(a)}return t.length<=3?`${this.placeHolderCharacter}.${this.placeHolderCharacter}.${this.placeHolderCharacter}`:t.length>3&&t.length<=6?`${this.placeHolderCharacter}.${this.placeHolderCharacter}`:t.length>6&&t.length<=9?this.placeHolderCharacter:(t.length>9&&t.length<=12,"")}_checkForCpfCnpj(e){let t=`${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`,n=`${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}.${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}/${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}${this.placeHolderCharacter}-${this.placeHolderCharacter}${this.placeHolderCharacter}`;if(e==="#")return t;let a=[];for(let c=0;c<e.length;c++){let l=e[c]??"";l&&l.match("\\d")&&a.push(l)}return a.length<=3?t.slice(a.length,t.length):a.length>3&&a.length<=6?t.slice(a.length+1,t.length):a.length>6&&a.length<=9?t.slice(a.length+2,t.length):a.length>9&&a.length<11?t.slice(a.length+3,t.length):a.length===11?"":a.length===12?e.length===17?n.slice(16,n.length):n.slice(15,n.length):a.length>12&&a.length<=14?n.slice(a.length+4,n.length):""}_getActiveElement(e=this.document){let t=e?.activeElement?.shadowRoot;return t?.activeElement?this._getActiveElement(t):e.activeElement}formControlResult(e){if(this.writingValue||!this.triggerOnMaskChange&&this.maskChanged){this.maskChanged&&this.onChange(this.outputTransformFn(this._toNumber(this._checkSymbols(this._removeSuffix(this._removePrefix(e)))))),this.maskChanged=!1;return}Array.isArray(this.dropSpecialCharacters)?this.onChange(this.outputTransformFn(this._toNumber(this._checkSymbols(this._removeMask(this._removeSuffix(this._removePrefix(e)),this.dropSpecialCharacters))))):this.dropSpecialCharacters||!this.dropSpecialCharacters&&this.prefix===e?this.onChange(this.outputTransformFn(this._toNumber(this._checkSymbols(this._removeSuffix(this._removePrefix(e)))))):this.onChange(this.outputTransformFn(this._toNumber(e)))}_toNumber(e){if(!this.isNumberValue||e===""||this.maskExpression.startsWith("separator")&&(this.leadZero||!this.dropSpecialCharacters))return e;if(String(e).length>16&&this.separatorLimit.length>14)return String(e);let t=Number(e);if(this.maskExpression.startsWith("separator")&&Number.isNaN(t)){let n=String(e).replace(",",".");return Number(n)}return Number.isNaN(t)?e:t}_removeMask(e,t){return this.maskExpression.startsWith("percent")&&e.includes(".")?e:e&&e.replace(this._regExpForRemove(t),"")}_removePrefix(e){return this.prefix?e&&e.replace(this.prefix,""):e}_removeSuffix(e){return this.suffix?e&&e.replace(this.suffix,""):e}_retrieveSeparatorValue(e){let t=Array.isArray(this.dropSpecialCharacters)?this.specialCharacters.filter(n=>this.dropSpecialCharacters.includes(n)):this.specialCharacters;return!this.deletedSpecialCharacter&&this._checkPatternForSpace()&&e.includes(" ")&&this.maskExpression.includes("*")&&(t=t.filter(n=>n!==" ")),this._removeMask(e,t)}_regExpForRemove(e){return new RegExp(e.map(t=>`\\${t}`).join("|"),"gi")}_replaceDecimalMarkerToDot(e){let t=Array.isArray(this.decimalMarker)?this.decimalMarker:[this.decimalMarker];return e.replace(this._regExpForRemove(t),".")}_checkSymbols(e){if(e==="")return e;this.maskExpression.startsWith("percent")&&this.decimalMarker===","&&(e=e.replace(",","."));let t=this._retrieveSeparatorPrecision(this.maskExpression),n=this._replaceDecimalMarkerToDot(this._retrieveSeparatorValue(e));return this.isNumberValue&&t?e===this.decimalMarker?null:this.separatorLimit.length>14?String(n):this._checkPrecision(this.maskExpression,n):n}_checkPatternForSpace(){for(let e in this.patterns)if(this.patterns[e]&&this.patterns[e]?.hasOwnProperty("pattern")){let t=this.patterns[e]?.pattern.toString(),n=this.patterns[e]?.pattern;if(t?.includes(" ")&&n?.test(this.maskExpression))return!0}return!1}_retrieveSeparatorPrecision(e){let t=e.match(new RegExp("^separator\\.([^d]*)"));return t?Number(t[1]):null}_checkPrecision(e,t){let n=e.slice(10,11);return e.indexOf("2")>0||this.leadZero&&Number(n)>1?(this.decimalMarker===","&&this.leadZero&&(t=t.replace(",",".")),this.leadZero?Number(t).toFixed(Number(n)):Number(t).toFixed(2)):this.numberToString(t)}_repeatPatternSymbols(e){return e.match(/{[0-9]+}/)&&e.split("").reduce((t,n,a)=>{if(this._start=n==="{"?a:this._start,n!=="}")return this._findSpecialChar(n)?t+n:t;this._end=a;let c=Number(e.slice(this._start+1,this._end)),l=new Array(c+1).join(e[this._start-1]);if(e.slice(0,this._start).length>1&&e.includes("S")){let o=e.slice(0,this._start-1);return o.includes("{")?t+l:o+t+l}else return t+l},"")||e}currentLocaleDecimalMarker(){return 1.1.toLocaleString().substring(1,2)}};r.\u0275fac=(()=>{let e;return function(n){return(e||(e=Re(r)))(n||r)}})(),r.\u0275prov=M({token:r,factory:r.\u0275fac});let i=r;return i})();function Hi(){let i=p(Vr),r=p(Gr);return r instanceof Function?f(f({},i),r()):f(f({},i),r)}function zi(i){return[{provide:Gr,useValue:i},{provide:Vr,useValue:Ui},{provide:Je,useFactory:Hi},At]}function Gn(i){return Ze(zi(i))}var Vn=(()=>{let r=class r{constructor(){this.maskExpression="",this.specialCharacters=[],this.patterns={},this.prefix="",this.suffix="",this.thousandSeparator=" ",this.decimalMarker=".",this.dropSpecialCharacters=null,this.hiddenInput=null,this.showMaskTyped=null,this.placeHolderCharacter=null,this.shownMaskExpression=null,this.showTemplate=null,this.clearIfNotMatch=null,this.validation=null,this.separatorLimit=null,this.allowNegativeNumbers=null,this.leadZeroDateTime=null,this.leadZero=null,this.triggerOnMaskChange=null,this.apm=null,this.inputTransformFn=null,this.outputTransformFn=null,this.keepCharacterPositions=null,this.maskFilled=new Q,this._maskValue="",this._position=null,this._maskExpressionArray=[],this._justPasted=!1,this._isFocused=!1,this._isComposing=!1,this.document=p(Ke),this._maskService=p(At,{self:!0}),this._config=p(Je),this.onChange=e=>{},this.onTouch=()=>{}}ngOnChanges(e){let{maskExpression:t,specialCharacters:n,patterns:a,prefix:c,suffix:l,thousandSeparator:o,decimalMarker:h,dropSpecialCharacters:u,hiddenInput:d,showMaskTyped:S,placeHolderCharacter:C,shownMaskExpression:_,showTemplate:I,clearIfNotMatch:A,validation:Z,separatorLimit:ye,allowNegativeNumbers:oe,leadZeroDateTime:k,leadZero:g,triggerOnMaskChange:P,apm:b,inputTransformFn:G,outputTransformFn:H,keepCharacterPositions:ce}=e;if(t&&(t.currentValue!==t.previousValue&&!t.firstChange&&(this._maskService.maskChanged=!0),t.currentValue&&t.currentValue.split("||").length>1?(this._maskExpressionArray=t.currentValue.split("||").sort((E,z)=>E.length-z.length),this._setMask()):(this._maskExpressionArray=[],this._maskValue=t.currentValue||"",this._maskService.maskExpression=this._maskValue)),n){if(!n.currentValue||!Array.isArray(n.currentValue))return;this._maskService.specialCharacters=n.currentValue||[]}oe&&(this._maskService.allowNegativeNumbers=oe.currentValue,this._maskService.allowNegativeNumbers&&(this._maskService.specialCharacters=this._maskService.specialCharacters.filter(E=>E!=="-"))),a&&a.currentValue&&(this._maskService.patterns=a.currentValue),b&&b.currentValue&&(this._maskService.apm=b.currentValue),c&&(this._maskService.prefix=c.currentValue),l&&(this._maskService.suffix=l.currentValue),o&&(this._maskService.thousandSeparator=o.currentValue),h&&(this._maskService.decimalMarker=h.currentValue),u&&(this._maskService.dropSpecialCharacters=u.currentValue),d&&(this._maskService.hiddenInput=d.currentValue),S&&(this._maskService.showMaskTyped=S.currentValue,S.previousValue===!1&&S.currentValue===!0&&this._isFocused&&requestAnimationFrame(()=>{this._maskService._elementRef?.nativeElement.click()})),C&&(this._maskService.placeHolderCharacter=C.currentValue),_&&(this._maskService.shownMaskExpression=_.currentValue),I&&(this._maskService.showTemplate=I.currentValue),A&&(this._maskService.clearIfNotMatch=A.currentValue),Z&&(this._maskService.validation=Z.currentValue),ye&&(this._maskService.separatorLimit=ye.currentValue),k&&(this._maskService.leadZeroDateTime=k.currentValue),g&&(this._maskService.leadZero=g.currentValue),P&&(this._maskService.triggerOnMaskChange=P.currentValue),G&&(this._maskService.inputTransformFn=G.currentValue),H&&(this._maskService.outputTransformFn=H.currentValue),ce&&(this._maskService.keepCharacterPositions=ce.currentValue),this._applyMask()}validate({value:e}){if(!this._maskService.validation||!this._maskValue)return null;if(this._maskService.ipError)return this._createValidationError(e);if(this._maskService.cpfCnpjError)return this._createValidationError(e);if(this._maskValue.startsWith("separator")||Li.includes(this._maskValue)||this._maskService.clearIfNotMatch)return null;if(ji.includes(this._maskValue))return this._validateTime(e);if(e&&e.toString().length>=1){let t=0;if(this._maskValue.startsWith("percent"))return null;for(let n in this._maskService.patterns)if(this._maskService.patterns[n]?.optional){if(this._maskValue.indexOf(n)!==this._maskValue.lastIndexOf(n)){let a=this._maskValue.split("").filter(c=>c===n).join("");t+=a.length}else this._maskValue.indexOf(n)!==-1&&t++;if(this._maskValue.indexOf(n)!==-1&&e.toString().length>=this._maskValue.indexOf(n)||t===this._maskValue.length)return null}if(this._maskValue.indexOf("{")===1&&e.toString().length===this._maskValue.length+Number((this._maskValue.split("{")[1]??"").split("}")[0])-4)return null;if(this._maskValue.indexOf("*")>1&&e.toString().length<this._maskValue.indexOf("*")||this._maskValue.indexOf("?")>1&&e.toString().length<this._maskValue.indexOf("?")||this._maskValue.indexOf("{")===1)return this._createValidationError(e);if(this._maskValue.indexOf("*")===-1||this._maskValue.indexOf("?")===-1){e=typeof e=="number"?String(e):e;let n=this._maskValue.split("*"),a=this._maskService.dropSpecialCharacters?this._maskValue.length-this._maskService.checkDropSpecialCharAmount(this._maskValue)-t:this.prefix?this._maskValue.length+this.prefix.length-t:this._maskValue.length-t;if(n.length===1&&e.toString().length<a)return this._createValidationError(e);if(n.length>1){let c=n[n.length-1];if(c&&this._maskService.specialCharacters.includes(c[0])&&String(e).includes(c[0]??"")&&!this.dropSpecialCharacters){let l=e.split(c[0]);return l[l.length-1].length===c.length-1?null:this._createValidationError(e)}else return(c&&!this._maskService.specialCharacters.includes(c[0])||!c||this._maskService.dropSpecialCharacters)&&e.length>=a-1?null:this._createValidationError(e)}}if(this._maskValue.indexOf("*")===1||this._maskValue.indexOf("?")===1)return null}return e&&this.maskFilled.emit(),null}onPaste(){this._justPasted=!0}onFocus(){this._isFocused=!0}onModelChange(e){(e===""||e===null||e===void 0)&&this._maskService.actualValue&&(this._maskService.actualValue=this._maskService.getActualValue(""))}onInput(e){if(this._isComposing)return;let t=e.target,n=this._maskService.inputTransformFn(t.value);if(t.type!=="number")if(typeof n=="string"||typeof n=="number"){if(t.value=n.toString(),this._inputValue=t.value,this._setMask(),!this._maskValue){this.onChange(t.value);return}let a=t.selectionStart===1?t.selectionStart+this._maskService.prefix.length:t.selectionStart;if(this.showMaskTyped&&this.keepCharacterPositions&&this._maskService.placeHolderCharacter.length===1){let h=t.value.slice(a-1,a),u=this.prefix.length,d=this._maskService._checkSymbolMask(h,this._maskService.maskExpression[a-1-u]??""),S=this._maskService._checkSymbolMask(h,this._maskService.maskExpression[a+1-u]??""),C=this._maskService.selStart===this._maskService.selEnd,_=Number(this._maskService.selStart)-u,I=Number(this._maskService.selEnd)-u;if(this._code==="Backspace"){if(!C)this._maskService.selStart===u?this._maskService.actualValue=this.prefix+this._maskService.maskIsShown.slice(0,I)+this._inputValue.split(this.prefix).join(""):this._maskService.selStart===this._maskService.maskIsShown.length+u?this._maskService.actualValue=this._inputValue+this._maskService.maskIsShown.slice(_,I):this._maskService.actualValue=this.prefix+this._inputValue.split(this.prefix).join("").slice(0,_)+this._maskService.maskIsShown.slice(_,I)+this._maskService.actualValue.slice(I+u,this._maskService.maskIsShown.length+u)+this.suffix;else if(!this._maskService.specialCharacters.includes(this._maskService.maskExpression.slice(a-this.prefix.length,a+1-this.prefix.length))&&C)if(_===1&&this.prefix)this._maskService.actualValue=this.prefix+this._maskService.placeHolderCharacter+t.value.split(this.prefix).join("").split(this.suffix).join("")+this.suffix,a=a-1;else{let A=t.value.substring(0,a),Z=t.value.substring(a);this._maskService.actualValue=A+this._maskService.placeHolderCharacter+Z}}this._code!=="Backspace"&&(!d&&!S&&C?a=Number(t.selectionStart)-1:this._maskService.specialCharacters.includes(t.value.slice(a,a+1))&&S&&!this._maskService.specialCharacters.includes(t.value.slice(a+1,a+2))?(this._maskService.actualValue=t.value.slice(0,a-1)+t.value.slice(a,a+1)+h+t.value.slice(a+2),a=a+1):d?t.value.length===1&&a===1?this._maskService.actualValue=this.prefix+h+this._maskService.maskIsShown.slice(1,this._maskService.maskIsShown.length)+this.suffix:this._maskService.actualValue=t.value.slice(0,a-1)+h+t.value.slice(a+1).split(this.suffix).join("")+this.suffix:this.prefix&&t.value.length===1&&a-u===1&&this._maskService._checkSymbolMask(t.value,this._maskService.maskExpression[a-1-u]??"")&&(this._maskService.actualValue=this.prefix+t.value+this._maskService.maskIsShown.slice(1,this._maskService.maskIsShown.length)+this.suffix))}let c=0,l=!1;if(this._code==="Delete"&&(this._maskService.deletedSpecialCharacter=!0),this._inputValue.length>=this._maskService.maskExpression.length-1&&this._code!=="Backspace"&&this._maskService.maskExpression==="d0/M0/0000"&&a<10){let h=this._inputValue.slice(a-1,a);t.value=this._inputValue.slice(0,a-1)+h+this._inputValue.slice(a+1)}if(this._maskService.maskExpression==="d0/M0/0000"&&this.leadZeroDateTime&&(a<3&&Number(t.value)>31&&Number(t.value)<40||a===5&&Number(t.value.slice(3,5))>12)&&(a=a+2),this._maskService.maskExpression==="Hh:m0:s0"&&this.apm&&(this._justPasted&&t.value.slice(0,2)==="00"&&(t.value=t.value.slice(1,2)+t.value.slice(2,t.value.length)),t.value=t.value==="00"?"0":t.value),this._maskService.applyValueChanges(a,this._justPasted,this._code==="Backspace"||this._code==="Delete",(h,u)=>{this._justPasted=!1,c=h,l=u}),this._getActiveElement()!==t)return;this._maskService.plusOnePosition&&(a=a+1,this._maskService.plusOnePosition=!1),this._maskExpressionArray.length&&(this._code==="Backspace"?a=this.specialCharacters.includes(this._inputValue.slice(a-1,a))?a-1:a:a=t.selectionStart===1?t.selectionStart+this._maskService.prefix.length:t.selectionStart),this._position=this._position===1&&this._inputValue.length===1?null:this._position;let o=this._position?this._inputValue.length+a+c:a+(this._code==="Backspace"&&!l?0:c);o>this._getActualInputLength()&&(o=t.value===this._maskService.decimalMarker&&t.value.length===1?this._getActualInputLength()+1:this._getActualInputLength()),o<0&&(o=0),t.setSelectionRange(o,o),this._position=null}else console.warn("Ngx-mask writeValue work with string | number, your current value:",typeof n);else{if(!this._maskValue){this.onChange(t.value);return}this._maskService.applyValueChanges(t.value.length,this._justPasted,this._code==="Backspace"||this._code==="Delete")}}onCompositionStart(){this._isComposing=!0}onCompositionEnd(e){this._isComposing=!1,this._justPasted=!0,this.onInput(e)}onBlur(e){if(this._maskValue){let t=e.target;if(this.leadZero&&t.value.length>0&&typeof this.decimalMarker=="string"){let n=this._maskService.maskExpression,a=Number(this._maskService.maskExpression.slice(n.length-1,n.length));if(a>1){t.value=this.suffix?t.value.split(this.suffix).join(""):t.value;let c=t.value.split(this.decimalMarker)[1];t.value=t.value.includes(this.decimalMarker)?t.value+"0".repeat(a-c.length)+this.suffix:t.value+this.decimalMarker+"0".repeat(a)+this.suffix,this._maskService.actualValue=t.value}}this._maskService.clearIfNotMatchFn()}this._isFocused=!1,this.onTouch()}onClick(e){if(!this._maskValue)return;let t=e.target,n=0,a=0;t!==null&&t.selectionStart!==null&&t.selectionStart===t.selectionEnd&&t.selectionStart>this._maskService.prefix.length&&e.keyCode!==38&&this._maskService.showMaskTyped&&!this.keepCharacterPositions&&(this._maskService.maskIsShown=this._maskService.showMaskInInput(),t.setSelectionRange&&this._maskService.prefix+this._maskService.maskIsShown===t.value?(t.focus(),t.setSelectionRange(n,a)):t.selectionStart>this._maskService.actualValue.length&&t.setSelectionRange(this._maskService.actualValue.length,this._maskService.actualValue.length));let c=t&&(t.value===this._maskService.prefix?this._maskService.prefix+this._maskService.maskIsShown:t.value);if(t&&t.value!==c&&(t.value=c),t&&t.type!=="number"&&(t.selectionStart||t.selectionEnd)<=this._maskService.prefix.length){t.selectionStart=this._maskService.prefix.length;return}t&&t.selectionEnd>this._getActualInputLength()&&(t.selectionEnd=this._getActualInputLength())}onKeyDown(e){if(!this._maskValue)return;if(this._isComposing){e.key==="Enter"&&this.onCompositionEnd(e);return}this._code=e.code?e.code:e.key;let t=e.target;if(this._inputValue=t.value,this._setMask(),t.type!=="number"){if(e.key==="ArrowUp"&&e.preventDefault(),e.key==="ArrowLeft"||e.key==="Backspace"||e.key==="Delete"){if(e.key==="Backspace"&&t.value.length===0&&(t.selectionStart=t.selectionEnd),e.key==="Backspace"&&t.selectionStart!==0){if(this.specialCharacters=this.specialCharacters?.length?this.specialCharacters:this._config.specialCharacters,this.prefix.length>1&&t.selectionStart<=this.prefix.length)t.setSelectionRange(this.prefix.length,t.selectionEnd);else if(this._inputValue.length!==t.selectionStart&&t.selectionStart!==1)for(;this.specialCharacters.includes((this._inputValue[t.selectionStart-1]??"").toString())&&(this.prefix.length>=1&&t.selectionStart>this.prefix.length||this.prefix.length===0);)t.setSelectionRange(t.selectionStart-1,t.selectionEnd)}this.checkSelectionOnDeletion(t),this._maskService.prefix.length&&t.selectionStart<=this._maskService.prefix.length&&t.selectionEnd<=this._maskService.prefix.length&&e.preventDefault();let n=t.selectionStart;e.key==="Backspace"&&!t.readOnly&&n===0&&t.selectionEnd===t.value.length&&t.value.length!==0&&(this._position=this._maskService.prefix?this._maskService.prefix.length:0,this._maskService.applyMask(this._maskService.prefix,this._maskService.maskExpression,this._position))}this.suffix&&this.suffix.length>1&&this._inputValue.length-this.suffix.length<t.selectionStart?t.setSelectionRange(this._inputValue.length-this.suffix.length,this._inputValue.length):(e.code==="KeyA"&&e.ctrlKey||e.code==="KeyA"&&e.metaKey)&&(t.setSelectionRange(0,this._getActualInputLength()),e.preventDefault()),this._maskService.selStart=t.selectionStart,this._maskService.selEnd=t.selectionEnd}}writeValue(e){return Sr(this,null,function*(){if(typeof e=="object"&&e!==null&&"value"in e&&("disable"in e&&this.setDisabledState(!!e.disable),e=e.value),e!==null&&(e=this.inputTransformFn?this.inputTransformFn(e):e),typeof e=="string"||typeof e=="number"||e===null||e===void 0){(e==null||e==="")&&(this._maskService._currentValue="",this._maskService._previousValue="");let t=e;if(typeof t=="number"||this._maskValue.startsWith("separator")){t=String(t);let n=this._maskService.currentLocaleDecimalMarker();Array.isArray(this._maskService.decimalMarker)||(t=this._maskService.decimalMarker!==n?t.replace(n,this._maskService.decimalMarker):t),this._maskService.leadZero&&t&&this.maskExpression&&this.dropSpecialCharacters!==!1&&(t=this._maskService._checkPrecision(this._maskService.maskExpression,t)),this._maskService.decimalMarker===","&&(t=t.toString().replace(".",",")),this.maskExpression?.startsWith("separator")&&this.leadZero&&requestAnimationFrame(()=>{this._maskService.applyMask(t?.toString()??"",this._maskService.maskExpression)}),this._maskService.isNumberValue=!0}typeof t!="string"&&(t=""),this._inputValue=t,this._setMask(),t&&this._maskService.maskExpression||this._maskService.maskExpression&&(this._maskService.prefix||this._maskService.showMaskTyped)?(typeof this.inputTransformFn!="function"&&(this._maskService.writingValue=!0),this._maskService.formElementProperty=["value",this._maskService.applyMask(t,this._maskService.maskExpression)],typeof this.inputTransformFn!="function"&&(this._maskService.writingValue=!1)):this._maskService.formElementProperty=["value",t],this._inputValue=t}else console.warn("Ngx-mask writeValue work with string | number, your current value:",typeof e)})}registerOnChange(e){this._maskService.onChange=this.onChange=e}registerOnTouched(e){this.onTouch=e}_getActiveElement(e=this.document){let t=e?.activeElement?.shadowRoot;return t?.activeElement?this._getActiveElement(t):e.activeElement}checkSelectionOnDeletion(e){e.selectionStart=Math.min(Math.max(this.prefix.length,e.selectionStart),this._inputValue.length-this.suffix.length),e.selectionEnd=Math.min(Math.max(this.prefix.length,e.selectionEnd),this._inputValue.length-this.suffix.length)}setDisabledState(e){this._maskService.formElementProperty=["disabled",e]}_applyMask(){this._maskService.maskExpression=this._maskService._repeatPatternSymbols(this._maskValue||""),this._maskService.formElementProperty=["value",this._maskService.applyMask(this._inputValue,this._maskService.maskExpression)]}_validateTime(e){let t=this._maskValue.split("").filter(n=>n!==":").length;return e&&(+(e[e.length-1]??-1)==0&&e.length<t||e.length<=t-2)?this._createValidationError(e):null}_getActualInputLength(){return this._maskService.actualValue.length||this._maskService.actualValue.length+this._maskService.prefix.length}_createValidationError(e){return{mask:{requiredMask:this._maskValue,actualValue:e}}}_setMask(){this._maskExpressionArray.some(e=>{if(e.split("").some(n=>this._maskService.specialCharacters.includes(n))&&this._inputValue&&!e.includes("S")||e.includes("{")){let n=this._maskService.removeMask(this._inputValue)?.length<=this._maskService.removeMask(e)?.length;if(n)return this._maskValue=this.maskExpression=this._maskService.maskExpression=e.includes("{")?this._maskService._repeatPatternSymbols(e):e,n;{let a=this._maskExpressionArray[this._maskExpressionArray.length-1]??"";this._maskValue=this.maskExpression=this._maskService.maskExpression=a.includes("{")?this._maskService._repeatPatternSymbols(a):a}}else{let n=this._maskService.removeMask(this._inputValue)?.split("").every((a,c)=>{let l=e.charAt(c);return this._maskService._checkSymbolMask(a,l)});if(n)return this._maskValue=this.maskExpression=this._maskService.maskExpression=e,n}})}};r.\u0275fac=function(t){return new(t||r)},r.\u0275dir=We({type:r,selectors:[["input","mask",""],["textarea","mask",""]],hostBindings:function(t,n){t&1&&It("paste",function(){return n.onPaste()})("focus",function(c){return n.onFocus(c)})("ngModelChange",function(c){return n.onModelChange(c)})("input",function(c){return n.onInput(c)})("compositionstart",function(c){return n.onCompositionStart(c)})("compositionend",function(c){return n.onCompositionEnd(c)})("blur",function(c){return n.onBlur(c)})("click",function(c){return n.onClick(c)})("keydown",function(c){return n.onKeyDown(c)})},inputs:{maskExpression:[bt.None,"mask","maskExpression"],specialCharacters:"specialCharacters",patterns:"patterns",prefix:"prefix",suffix:"suffix",thousandSeparator:"thousandSeparator",decimalMarker:"decimalMarker",dropSpecialCharacters:"dropSpecialCharacters",hiddenInput:"hiddenInput",showMaskTyped:"showMaskTyped",placeHolderCharacter:"placeHolderCharacter",shownMaskExpression:"shownMaskExpression",showTemplate:"showTemplate",clearIfNotMatch:"clearIfNotMatch",validation:"validation",separatorLimit:"separatorLimit",allowNegativeNumbers:"allowNegativeNumbers",leadZeroDateTime:"leadZeroDateTime",leadZero:"leadZero",triggerOnMaskChange:"triggerOnMaskChange",apm:"apm",inputTransformFn:"inputTransformFn",outputTransformFn:"outputTransformFn",keepCharacterPositions:"keepCharacterPositions"},outputs:{maskFilled:"maskFilled"},exportAs:["mask","ngxMask"],standalone:!0,features:[jr([{provide:Wr,useExisting:r,multi:!0},{provide:Zr,useExisting:r,multi:!0},At]),Ve]});let i=r;return i})();var v="primary",Fe=Symbol("RouteTitle"),Pt=class{constructor(r){this.params=r||{}}has(r){return Object.prototype.hasOwnProperty.call(this.params,r)}get(r){if(this.has(r)){let s=this.params[r];return Array.isArray(s)?s[0]:s}return null}getAll(r){if(this.has(r)){let s=this.params[r];return Array.isArray(s)?s:[s]}return[]}get keys(){return Object.keys(this.params)}};function me(i){return new Pt(i)}function Bi(i,r,s){let e=s.path.split("/");if(e.length>i.length||s.pathMatch==="full"&&(r.hasChildren()||e.length<i.length))return null;let t={};for(let n=0;n<e.length;n++){let a=e[n],c=i[n];if(a.startsWith(":"))t[a.substring(1)]=c;else if(a!==c.path)return null}return{consumed:i.slice(0,e.length),posParams:t}}function qi(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(!q(i[s],r[s]))return!1;return!0}function q(i,r){let s=i?$t(i):void 0,e=r?$t(r):void 0;if(!s||!e||s.length!=e.length)return!1;let t;for(let n=0;n<s.length;n++)if(t=s[n],!ei(i[t],r[t]))return!1;return!0}function $t(i){return[...Object.keys(i),...Object.getOwnPropertySymbols(i)]}function ei(i,r){if(Array.isArray(i)&&Array.isArray(r)){if(i.length!==r.length)return!1;let s=[...i].sort(),e=[...r].sort();return s.every((t,n)=>e[n]===t)}else return i===r}function ti(i){return i.length>0?i[i.length-1]:null}function J(i){return yr(i)?i:Hr(i)?F(Promise.resolve(i)):m(i)}var Wi={exact:ii,subset:si},ri={exact:Zi,subset:Gi,ignored:()=>!0};function Qr(i,r,s){return Wi[s.paths](i.root,r.root,s.matrixParams)&&ri[s.queryParams](i.queryParams,r.queryParams)&&!(s.fragment==="exact"&&i.fragment!==r.fragment)}function Zi(i,r){return q(i,r)}function ii(i,r,s){if(!se(i.segments,r.segments)||!tt(i.segments,r.segments,s)||i.numberOfChildren!==r.numberOfChildren)return!1;for(let e in r.children)if(!i.children[e]||!ii(i.children[e],r.children[e],s))return!1;return!0}function Gi(i,r){return Object.keys(r).length<=Object.keys(i).length&&Object.keys(r).every(s=>ei(i[s],r[s]))}function si(i,r,s){return ni(i,r,r.segments,s)}function ni(i,r,s,e){if(i.segments.length>s.length){let t=i.segments.slice(0,s.length);return!(!se(t,s)||r.hasChildren()||!tt(t,s,e))}else if(i.segments.length===s.length){if(!se(i.segments,s)||!tt(i.segments,s,e))return!1;for(let t in r.children)if(!i.children[t]||!si(i.children[t],r.children[t],e))return!1;return!0}else{let t=s.slice(0,i.segments.length),n=s.slice(i.segments.length);return!se(i.segments,t)||!tt(i.segments,t,e)||!i.children[v]?!1:ni(i.children[v],r,n,e)}}function tt(i,r,s){return r.every((e,t)=>ri[s](i[t].parameters,e.parameters))}var K=class{constructor(r=new y([],{}),s={},e=null){this.root=r,this.queryParams=s,this.fragment=e}get queryParamMap(){return this._queryParamMap??=me(this.queryParams),this._queryParamMap}toString(){return Ki.serialize(this)}},y=class{constructor(r,s){this.segments=r,this.children=s,this.parent=null,Object.values(s).forEach(e=>e.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return rt(this)}},ie=class{constructor(r,s){this.path=r,this.parameters=s}get parameterMap(){return this._parameterMap??=me(this.parameters),this._parameterMap}toString(){return oi(this)}};function Vi(i,r){return se(i,r)&&i.every((s,e)=>q(s.parameters,r[e].parameters))}function se(i,r){return i.length!==r.length?!1:i.every((s,e)=>s.path===r[e].path)}function Qi(i,r){let s=[];return Object.entries(i.children).forEach(([e,t])=>{e===v&&(s=s.concat(r(t,e)))}),Object.entries(i.children).forEach(([e,t])=>{e!==v&&(s=s.concat(r(t,e)))}),s}var cr=(()=>{let r=class r{};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=M({token:r,factory:()=>new st,providedIn:"root"});let i=r;return i})(),st=class{parse(r){let s=new jt(r);return new K(s.parseRootSegment(),s.parseQueryParams(),s.parseFragment())}serialize(r){let s=`/${Me(r.root,!0)}`,e=Xi(r.queryParams),t=typeof r.fragment=="string"?`#${Yi(r.fragment)}`:"";return`${s}${e}${t}`}},Ki=new st;function rt(i){return i.segments.map(r=>oi(r)).join("/")}function Me(i,r){if(!i.hasChildren())return rt(i);if(r){let s=i.children[v]?Me(i.children[v],!1):"",e=[];return Object.entries(i.children).forEach(([t,n])=>{t!==v&&e.push(`${t}:${Me(n,!1)}`)}),e.length>0?`${s}(${e.join("//")})`:s}else{let s=Qi(i,(e,t)=>t===v?[Me(i.children[v],!1)]:[`${t}:${Me(e,!1)}`]);return Object.keys(i.children).length===1&&i.children[v]!=null?`${rt(i)}/${s[0]}`:`${rt(i)}/(${s.join("//")})`}}function ai(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Xe(i){return ai(i).replace(/%3B/gi,";")}function Yi(i){return encodeURI(i)}function Ut(i){return ai(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function it(i){return decodeURIComponent(i)}function Kr(i){return it(i.replace(/\+/g,"%20"))}function oi(i){return`${Ut(i.path)}${Ji(i.parameters)}`}function Ji(i){return Object.entries(i).map(([r,s])=>`;${Ut(r)}=${Ut(s)}`).join("")}function Xi(i){let r=Object.entries(i).map(([s,e])=>Array.isArray(e)?e.map(t=>`${Xe(s)}=${Xe(t)}`).join("&"):`${Xe(s)}=${Xe(e)}`).filter(s=>s);return r.length?`?${r.join("&")}`:""}var es=/^[^\/()?;#]+/;function Tt(i){let r=i.match(es);return r?r[0]:""}var ts=/^[^\/()?;=#]+/;function rs(i){let r=i.match(ts);return r?r[0]:""}var is=/^[^=?&#]+/;function ss(i){let r=i.match(is);return r?r[0]:""}var ns=/^[^&#]+/;function as(i){let r=i.match(ns);return r?r[0]:""}var jt=class{constructor(r){this.url=r,this.remaining=r}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new y([],{}):new y([],this.parseChildren())}parseQueryParams(){let r={};if(this.consumeOptional("?"))do this.parseQueryParam(r);while(this.consumeOptional("&"));return r}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let r=[];for(this.peekStartsWith("(")||r.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),r.push(this.parseSegment());let s={};this.peekStartsWith("/(")&&(this.capture("/"),s=this.parseParens(!0));let e={};return this.peekStartsWith("(")&&(e=this.parseParens(!1)),(r.length>0||Object.keys(s).length>0)&&(e[v]=new y(r,s)),e}parseSegment(){let r=Tt(this.remaining);if(r===""&&this.peekStartsWith(";"))throw new T(4009,!1);return this.capture(r),new ie(it(r),this.parseMatrixParams())}parseMatrixParams(){let r={};for(;this.consumeOptional(";");)this.parseParam(r);return r}parseParam(r){let s=rs(this.remaining);if(!s)return;this.capture(s);let e="";if(this.consumeOptional("=")){let t=Tt(this.remaining);t&&(e=t,this.capture(e))}r[it(s)]=it(e)}parseQueryParam(r){let s=ss(this.remaining);if(!s)return;this.capture(s);let e="";if(this.consumeOptional("=")){let a=as(this.remaining);a&&(e=a,this.capture(e))}let t=Kr(s),n=Kr(e);if(r.hasOwnProperty(t)){let a=r[t];Array.isArray(a)||(a=[a],r[t]=a),a.push(n)}else r[t]=n}parseParens(r){let s={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let e=Tt(this.remaining),t=this.remaining[e.length];if(t!=="/"&&t!==")"&&t!==";")throw new T(4010,!1);let n;e.indexOf(":")>-1?(n=e.slice(0,e.indexOf(":")),this.capture(n),this.capture(":")):r&&(n=v);let a=this.parseChildren();s[n]=Object.keys(a).length===1?a[v]:new y([],a),this.consumeOptional("//")}return s}peekStartsWith(r){return this.remaining.startsWith(r)}consumeOptional(r){return this.peekStartsWith(r)?(this.remaining=this.remaining.substring(r.length),!0):!1}capture(r){if(!this.consumeOptional(r))throw new T(4011,!1)}};function ci(i){return i.segments.length>0?new y([],{[v]:i}):i}function hi(i){let r={};for(let[e,t]of Object.entries(i.children)){let n=hi(t);if(e===v&&n.segments.length===0&&n.hasChildren())for(let[a,c]of Object.entries(n.children))r[a]=c;else(n.segments.length>0||n.hasChildren())&&(r[e]=n)}let s=new y(i.segments,r);return os(s)}function os(i){if(i.numberOfChildren===1&&i.children[v]){let r=i.children[v];return new y(i.segments.concat(r.segments),r.children)}return i}function ve(i){return i instanceof K}function cs(i,r,s=null,e=null){let t=li(i);return ui(t,r,s,e)}function li(i){let r;function s(n){let a={};for(let l of n.children){let o=s(l);a[l.outlet]=o}let c=new y(n.url,a);return n===i&&(r=c),c}let e=s(i.root),t=ci(e);return r??t}function ui(i,r,s,e){let t=i;for(;t.parent;)t=t.parent;if(r.length===0)return Dt(t,t,t,s,e);let n=hs(r);if(n.toRoot())return Dt(t,t,new y([],{}),s,e);let a=ls(n,t,i),c=a.processChildren?Ee(a.segmentGroup,a.index,n.commands):fi(a.segmentGroup,a.index,n.commands);return Dt(t,a.segmentGroup,c,s,e)}function nt(i){return typeof i=="object"&&i!=null&&!i.outlets&&!i.segmentPath}function De(i){return typeof i=="object"&&i!=null&&i.outlets}function Dt(i,r,s,e,t){let n={};e&&Object.entries(e).forEach(([l,o])=>{n[l]=Array.isArray(o)?o.map(h=>`${h}`):`${o}`});let a;i===r?a=s:a=di(i,r,s);let c=ci(hi(a));return new K(c,n,t)}function di(i,r,s){let e={};return Object.entries(i.children).forEach(([t,n])=>{n===r?e[t]=s:e[t]=di(n,r,s)}),new y(i.segments,e)}var at=class{constructor(r,s,e){if(this.isAbsolute=r,this.numberOfDoubleDots=s,this.commands=e,r&&e.length>0&&nt(e[0]))throw new T(4003,!1);let t=e.find(De);if(t&&t!==ti(e))throw new T(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function hs(i){if(typeof i[0]=="string"&&i.length===1&&i[0]==="/")return new at(!0,0,i);let r=0,s=!1,e=i.reduce((t,n,a)=>{if(typeof n=="object"&&n!=null){if(n.outlets){let c={};return Object.entries(n.outlets).forEach(([l,o])=>{c[l]=typeof o=="string"?o.split("/"):o}),[...t,{outlets:c}]}if(n.segmentPath)return[...t,n.segmentPath]}return typeof n!="string"?[...t,n]:a===0?(n.split("/").forEach((c,l)=>{l==0&&c==="."||(l==0&&c===""?s=!0:c===".."?r++:c!=""&&t.push(c))}),t):[...t,n]},[]);return new at(s,r,e)}var pe=class{constructor(r,s,e){this.segmentGroup=r,this.processChildren=s,this.index=e}};function ls(i,r,s){if(i.isAbsolute)return new pe(r,!0,0);if(!s)return new pe(r,!1,NaN);if(s.parent===null)return new pe(s,!0,0);let e=nt(i.commands[0])?0:1,t=s.segments.length-1+e;return us(s,t,i.numberOfDoubleDots)}function us(i,r,s){let e=i,t=r,n=s;for(;n>t;){if(n-=t,e=e.parent,!e)throw new T(4005,!1);t=e.segments.length}return new pe(e,!1,t-n)}function ds(i){return De(i[0])?i[0].outlets:{[v]:i}}function fi(i,r,s){if(i??=new y([],{}),i.segments.length===0&&i.hasChildren())return Ee(i,r,s);let e=fs(i,r,s),t=s.slice(e.commandIndex);if(e.match&&e.pathIndex<i.segments.length){let n=new y(i.segments.slice(0,e.pathIndex),{});return n.children[v]=new y(i.segments.slice(e.pathIndex),i.children),Ee(n,0,t)}else return e.match&&t.length===0?new y(i.segments,{}):e.match&&!i.hasChildren()?Lt(i,r,s):e.match?Ee(i,0,t):Lt(i,r,s)}function Ee(i,r,s){if(s.length===0)return new y(i.segments,{});{let e=ds(s),t={};if(Object.keys(e).some(n=>n!==v)&&i.children[v]&&i.numberOfChildren===1&&i.children[v].segments.length===0){let n=Ee(i.children[v],r,s);return new y(i.segments,n.children)}return Object.entries(e).forEach(([n,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(t[n]=fi(i.children[n],r,a))}),Object.entries(i.children).forEach(([n,a])=>{e[n]===void 0&&(t[n]=a)}),new y(i.segments,t)}}function fs(i,r,s){let e=0,t=r,n={match:!1,pathIndex:0,commandIndex:0};for(;t<i.segments.length;){if(e>=s.length)return n;let a=i.segments[t],c=s[e];if(De(c))break;let l=`${c}`,o=e<s.length-1?s[e+1]:null;if(t>0&&l===void 0)break;if(l&&o&&typeof o=="object"&&o.outlets===void 0){if(!Jr(l,o,a))return n;e+=2}else{if(!Jr(l,{},a))return n;e++}t++}return{match:!0,pathIndex:t,commandIndex:e}}function Lt(i,r,s){let e=i.segments.slice(0,r),t=0;for(;t<s.length;){let n=s[t];if(De(n)){let l=ps(n.outlets);return new y(e,l)}if(t===0&&nt(s[0])){let l=i.segments[r];e.push(new ie(l.path,Yr(s[0]))),t++;continue}let a=De(n)?n.outlets[v]:`${n}`,c=t<s.length-1?s[t+1]:null;a&&c&&nt(c)?(e.push(new ie(a,Yr(c))),t+=2):(e.push(new ie(a,{})),t++)}return new y(e,{})}function ps(i){let r={};return Object.entries(i).forEach(([s,e])=>{typeof e=="string"&&(e=[e]),e!==null&&(r[s]=Lt(new y([],{}),0,e))}),r}function Yr(i){let r={};return Object.entries(i).forEach(([s,e])=>r[s]=`${e}`),r}function Jr(i,r,s){return i==s.path&&q(r,s.parameters)}var Ae="imperative",x=function(i){return i[i.NavigationStart=0]="NavigationStart",i[i.NavigationEnd=1]="NavigationEnd",i[i.NavigationCancel=2]="NavigationCancel",i[i.NavigationError=3]="NavigationError",i[i.RoutesRecognized=4]="RoutesRecognized",i[i.ResolveStart=5]="ResolveStart",i[i.ResolveEnd=6]="ResolveEnd",i[i.GuardsCheckStart=7]="GuardsCheckStart",i[i.GuardsCheckEnd=8]="GuardsCheckEnd",i[i.RouteConfigLoadStart=9]="RouteConfigLoadStart",i[i.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",i[i.ChildActivationStart=11]="ChildActivationStart",i[i.ChildActivationEnd=12]="ChildActivationEnd",i[i.ActivationStart=13]="ActivationStart",i[i.ActivationEnd=14]="ActivationEnd",i[i.Scroll=15]="Scroll",i[i.NavigationSkipped=16]="NavigationSkipped",i}(x||{}),L=class{constructor(r,s){this.id=r,this.url=s}},Ne=class extends L{constructor(r,s,e="imperative",t=null){super(r,s),this.type=x.NavigationStart,this.navigationTrigger=e,this.restoredState=t}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ne=class extends L{constructor(r,s,e){super(r,s),this.urlAfterRedirects=e,this.type=x.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},j=function(i){return i[i.Redirect=0]="Redirect",i[i.SupersededByNewNavigation=1]="SupersededByNewNavigation",i[i.NoDataFromResolver=2]="NoDataFromResolver",i[i.GuardRejected=3]="GuardRejected",i}(j||{}),Ft=function(i){return i[i.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",i[i.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",i}(Ft||{}),Y=class extends L{constructor(r,s,e,t){super(r,s),this.reason=e,this.code=t,this.type=x.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ae=class extends L{constructor(r,s,e,t){super(r,s),this.reason=e,this.code=t,this.type=x.NavigationSkipped}},Oe=class extends L{constructor(r,s,e,t){super(r,s),this.error=e,this.target=t,this.type=x.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},ot=class extends L{constructor(r,s,e,t){super(r,s),this.urlAfterRedirects=e,this.state=t,this.type=x.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ht=class extends L{constructor(r,s,e,t){super(r,s),this.urlAfterRedirects=e,this.state=t,this.type=x.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},zt=class extends L{constructor(r,s,e,t,n){super(r,s),this.urlAfterRedirects=e,this.state=t,this.shouldActivate=n,this.type=x.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Bt=class extends L{constructor(r,s,e,t){super(r,s),this.urlAfterRedirects=e,this.state=t,this.type=x.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},qt=class extends L{constructor(r,s,e,t){super(r,s),this.urlAfterRedirects=e,this.state=t,this.type=x.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wt=class{constructor(r){this.route=r,this.type=x.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Zt=class{constructor(r){this.route=r,this.type=x.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Gt=class{constructor(r){this.snapshot=r,this.type=x.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Vt=class{constructor(r){this.snapshot=r,this.type=x.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Qt=class{constructor(r){this.snapshot=r,this.type=x.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Kt=class{constructor(r){this.snapshot=r,this.type=x.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Pe=class{},$e=class{constructor(r){this.url=r}};var Yt=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new ft,this.attachRef=null}},ft=(()=>{let r=class r{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){let n=this.getOrCreateContext(e);n.outlet=t,this.contexts.set(e,n)}onChildOutletDestroyed(e){let t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Yt,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=M({token:r,factory:r.\u0275fac,providedIn:"root"});let i=r;return i})(),ct=class{constructor(r){this._root=r}get root(){return this._root.value}parent(r){let s=this.pathFromRoot(r);return s.length>1?s[s.length-2]:null}children(r){let s=Jt(r,this._root);return s?s.children.map(e=>e.value):[]}firstChild(r){let s=Jt(r,this._root);return s&&s.children.length>0?s.children[0].value:null}siblings(r){let s=Xt(r,this._root);return s.length<2?[]:s[s.length-2].children.map(t=>t.value).filter(t=>t!==r)}pathFromRoot(r){return Xt(r,this._root).map(s=>s.value)}};function Jt(i,r){if(i===r.value)return r;for(let s of r.children){let e=Jt(i,s);if(e)return e}return null}function Xt(i,r){if(i===r.value)return[r];for(let s of r.children){let e=Xt(i,s);if(e.length)return e.unshift(r),e}return[]}var O=class{constructor(r,s){this.value=r,this.children=s}toString(){return`TreeNode(${this.value})`}};function fe(i){let r={};return i&&i.children.forEach(s=>r[s.value.outlet]=s),r}var ht=class extends ct{constructor(r,s){super(r),this.snapshot=s,lr(this,r)}toString(){return this.snapshot.toString()}};function pi(i){let r=gs(i),s=new $([new ie("",{})]),e=new $({}),t=new $({}),n=new $({}),a=new $(""),c=new Se(s,e,n,a,t,v,i,r.root);return c.snapshot=r.root,new ht(new O(c,[]),r)}function gs(i){let r={},s={},e={},t="",n=new Ue([],r,e,t,s,v,i,null,{});return new lt("",new O(n,[]))}var Se=class{constructor(r,s,e,t,n,a,c,l){this.urlSubject=r,this.paramsSubject=s,this.queryParamsSubject=e,this.fragmentSubject=t,this.dataSubject=n,this.outlet=a,this.component=c,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(w(o=>o[Fe]))??m(void 0),this.url=r,this.params=s,this.queryParams=e,this.fragment=t,this.data=n}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(w(r=>me(r))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(w(r=>me(r))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function hr(i,r,s="emptyOnly"){let e,{routeConfig:t}=i;return r!==null&&(s==="always"||t?.path===""||!r.component&&!r.routeConfig?.loadComponent)?e={params:f(f({},r.params),i.params),data:f(f({},r.data),i.data),resolve:f(f(f(f({},i.data),r.data),t?.data),i._resolvedData)}:e={params:f({},i.params),data:f({},i.data),resolve:f(f({},i.data),i._resolvedData??{})},t&&mi(t)&&(e.resolve[Fe]=t.title),e}var Ue=class{get title(){return this.data?.[Fe]}constructor(r,s,e,t,n,a,c,l,o){this.url=r,this.params=s,this.queryParams=e,this.fragment=t,this.data=n,this.outlet=a,this.component=c,this.routeConfig=l,this._resolve=o}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=me(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=me(this.queryParams),this._queryParamMap}toString(){let r=this.url.map(e=>e.toString()).join("/"),s=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${r}', path:'${s}')`}},lt=class extends ct{constructor(r,s){super(s),this.url=r,lr(this,s)}toString(){return gi(this._root)}};function lr(i,r){r.value._routerState=i,r.children.forEach(s=>lr(i,s))}function gi(i){let r=i.children.length>0?` { ${i.children.map(gi).join(", ")} } `:"";return`${i.value}${r}`}function Nt(i){if(i.snapshot){let r=i.snapshot,s=i._futureSnapshot;i.snapshot=s,q(r.queryParams,s.queryParams)||i.queryParamsSubject.next(s.queryParams),r.fragment!==s.fragment&&i.fragmentSubject.next(s.fragment),q(r.params,s.params)||i.paramsSubject.next(s.params),qi(r.url,s.url)||i.urlSubject.next(s.url),q(r.data,s.data)||i.dataSubject.next(s.data)}else i.snapshot=i._futureSnapshot,i.dataSubject.next(i._futureSnapshot.data)}function er(i,r){let s=q(i.params,r.params)&&Vi(i.url,r.url),e=!i.parent!=!r.parent;return s&&!e&&(!i.parent||er(i.parent,r.parent))}function mi(i){return typeof i.title=="string"||i.title===null}var ms=(()=>{let r=class r{constructor(){this.activated=null,this._activatedRoute=null,this.name=v,this.activateEvents=new Q,this.deactivateEvents=new Q,this.attachEvents=new Q,this.detachEvents=new Q,this.parentContexts=p(ft),this.location=p(Nr),this.changeDetector=p(xt),this.environmentInjector=p(Ge),this.inputBinder=p(ur,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(e){if(e.name){let{firstChange:t,previousValue:n}=e.name;if(t)return;this.isTrackedInParentContexts(n)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(n)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new T(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new T(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new T(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,t){if(this.isActivated)throw new T(4013,!1);this._activatedRoute=e;let n=this.location,c=e.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,o=new tr(e,l,n.injector);this.activated=n.createComponent(c,{index:n.length,injector:o,environmentInjector:t??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};r.\u0275fac=function(t){return new(t||r)},r.\u0275dir=We({type:r,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ve]});let i=r;return i})(),tr=class{constructor(r,s,e){this.route=r,this.childContexts=s,this.parent=e}get(r,s){return r===Se?this.route:r===ft?this.childContexts:this.parent.get(r,s)}},ur=new N("");function vs(i,r,s){let e=je(i,r._root,s?s._root:void 0);return new ht(e,r)}function je(i,r,s){if(s&&i.shouldReuseRoute(r.value,s.value.snapshot)){let e=s.value;e._futureSnapshot=r.value;let t=Ss(i,r,s);return new O(e,t)}else{if(i.shouldAttach(r.value)){let n=i.retrieve(r.value);if(n!==null){let a=n.route;return a.value._futureSnapshot=r.value,a.children=r.children.map(c=>je(i,c)),a}}let e=Cs(r.value),t=r.children.map(n=>je(i,n));return new O(e,t)}}function Ss(i,r,s){return r.children.map(e=>{for(let t of s.children)if(i.shouldReuseRoute(e.value,t.value.snapshot))return je(i,e,t);return je(i,e)})}function Cs(i){return new Se(new $(i.url),new $(i.params),new $(i.queryParams),new $(i.fragment),new $(i.data),i.outlet,i.component,i)}var vi="ngNavigationCancelingError";function Si(i,r){let{redirectTo:s,navigationBehaviorOptions:e}=ve(r)?{redirectTo:r,navigationBehaviorOptions:void 0}:r,t=Ci(!1,j.Redirect);return t.url=s,t.navigationBehaviorOptions=e,t}function Ci(i,r){let s=new Error(`NavigationCancelingError: ${i||""}`);return s[vi]=!0,s.cancellationCode=r,s}function ks(i){return ki(i)&&ve(i.url)}function ki(i){return!!i&&i[vi]}var ys=(()=>{let r=class r{};r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=Er({type:r,selectors:[["ng-component"]],standalone:!0,features:[Lr],decls:1,vars:0,template:function(t,n){t&1&&Ur(0,"router-outlet")},dependencies:[ms],encapsulation:2});let i=r;return i})();function _s(i,r){return i.providers&&!i._injector&&(i._injector=Pr(i.providers,r,`Route: ${i.path}`)),i._injector??r}function dr(i){let r=i.children&&i.children.map(dr),s=r?D(f({},i),{children:r}):f({},i);return!s.component&&!s.loadComponent&&(r||s.loadChildren)&&s.outlet&&s.outlet!==v&&(s.component=ys),s}function W(i){return i.outlet||v}function ws(i,r){let s=i.filter(e=>W(e)===r);return s.push(...i.filter(e=>W(e)!==r)),s}function He(i){if(!i)return null;if(i.routeConfig?._injector)return i.routeConfig._injector;for(let r=i.parent;r;r=r.parent){let s=r.routeConfig;if(s?._loadedInjector)return s._loadedInjector;if(s?._injector)return s._injector}return null}var bs=(i,r,s,e)=>w(t=>(new rr(r,t.targetRouterState,t.currentRouterState,s,e).activate(i),t)),rr=class{constructor(r,s,e,t,n){this.routeReuseStrategy=r,this.futureState=s,this.currState=e,this.forwardEvent=t,this.inputBindingEnabled=n}activate(r){let s=this.futureState._root,e=this.currState?this.currState._root:null;this.deactivateChildRoutes(s,e,r),Nt(this.futureState.root),this.activateChildRoutes(s,e,r)}deactivateChildRoutes(r,s,e){let t=fe(s);r.children.forEach(n=>{let a=n.value.outlet;this.deactivateRoutes(n,t[a],e),delete t[a]}),Object.values(t).forEach(n=>{this.deactivateRouteAndItsChildren(n,e)})}deactivateRoutes(r,s,e){let t=r.value,n=s?s.value:null;if(t===n)if(t.component){let a=e.getContext(t.outlet);a&&this.deactivateChildRoutes(r,s,a.children)}else this.deactivateChildRoutes(r,s,e);else n&&this.deactivateRouteAndItsChildren(s,e)}deactivateRouteAndItsChildren(r,s){r.value.component&&this.routeReuseStrategy.shouldDetach(r.value.snapshot)?this.detachAndStoreRouteSubtree(r,s):this.deactivateRouteAndOutlet(r,s)}detachAndStoreRouteSubtree(r,s){let e=s.getContext(r.value.outlet),t=e&&r.value.component?e.children:s,n=fe(r);for(let a of Object.values(n))this.deactivateRouteAndItsChildren(a,t);if(e&&e.outlet){let a=e.outlet.detach(),c=e.children.onOutletDeactivated();this.routeReuseStrategy.store(r.value.snapshot,{componentRef:a,route:r,contexts:c})}}deactivateRouteAndOutlet(r,s){let e=s.getContext(r.value.outlet),t=e&&r.value.component?e.children:s,n=fe(r);for(let a of Object.values(n))this.deactivateRouteAndItsChildren(a,t);e&&(e.outlet&&(e.outlet.deactivate(),e.children.onOutletDeactivated()),e.attachRef=null,e.route=null)}activateChildRoutes(r,s,e){let t=fe(s);r.children.forEach(n=>{this.activateRoutes(n,t[n.value.outlet],e),this.forwardEvent(new Kt(n.value.snapshot))}),r.children.length&&this.forwardEvent(new Vt(r.value.snapshot))}activateRoutes(r,s,e){let t=r.value,n=s?s.value:null;if(Nt(t),t===n)if(t.component){let a=e.getOrCreateContext(t.outlet);this.activateChildRoutes(r,s,a.children)}else this.activateChildRoutes(r,s,e);else if(t.component){let a=e.getOrCreateContext(t.outlet);if(this.routeReuseStrategy.shouldAttach(t.snapshot)){let c=this.routeReuseStrategy.retrieve(t.snapshot);this.routeReuseStrategy.store(t.snapshot,null),a.children.onOutletReAttached(c.contexts),a.attachRef=c.componentRef,a.route=c.route.value,a.outlet&&a.outlet.attach(c.componentRef,c.route.value),Nt(c.route.value),this.activateChildRoutes(r,null,a.children)}else{let c=He(t.snapshot);a.attachRef=null,a.route=t,a.injector=c,a.outlet&&a.outlet.activateWith(t,a.injector),this.activateChildRoutes(r,null,a.children)}}else this.activateChildRoutes(r,null,e)}},ut=class{constructor(r){this.path=r,this.route=this.path[this.path.length-1]}},ge=class{constructor(r,s){this.component=r,this.route=s}};function Rs(i,r,s){let e=i._root,t=r?r._root:null;return xe(e,t,s,[e.value])}function Ms(i){let r=i.routeConfig?i.routeConfig.canActivateChild:null;return!r||r.length===0?null:{node:i,guards:r}}function ke(i,r){let s=Symbol(),e=r.get(i,s);return e===s?typeof i=="function"&&!Ar(i)?i:r.get(i):e}function xe(i,r,s,e,t={canDeactivateChecks:[],canActivateChecks:[]}){let n=fe(r);return i.children.forEach(a=>{xs(a,n[a.value.outlet],s,e.concat([a.value]),t),delete n[a.value.outlet]}),Object.entries(n).forEach(([a,c])=>Te(c,s.getContext(a),t)),t}function xs(i,r,s,e,t={canDeactivateChecks:[],canActivateChecks:[]}){let n=i.value,a=r?r.value:null,c=s?s.getContext(i.value.outlet):null;if(a&&n.routeConfig===a.routeConfig){let l=Is(a,n,n.routeConfig.runGuardsAndResolvers);l?t.canActivateChecks.push(new ut(e)):(n.data=a.data,n._resolvedData=a._resolvedData),n.component?xe(i,r,c?c.children:null,e,t):xe(i,r,s,e,t),l&&c&&c.outlet&&c.outlet.isActivated&&t.canDeactivateChecks.push(new ge(c.outlet.component,a))}else a&&Te(r,c,t),t.canActivateChecks.push(new ut(e)),n.component?xe(i,null,c?c.children:null,e,t):xe(i,null,s,e,t);return t}function Is(i,r,s){if(typeof s=="function")return s(i,r);switch(s){case"pathParamsChange":return!se(i.url,r.url);case"pathParamsOrQueryParamsChange":return!se(i.url,r.url)||!q(i.queryParams,r.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!er(i,r)||!q(i.queryParams,r.queryParams);case"paramsChange":default:return!er(i,r)}}function Te(i,r,s){let e=fe(i),t=i.value;Object.entries(e).forEach(([n,a])=>{t.component?r?Te(a,r.children.getContext(n),s):Te(a,null,s):Te(a,r,s)}),t.component?r&&r.outlet&&r.outlet.isActivated?s.canDeactivateChecks.push(new ge(r.outlet.component,t)):s.canDeactivateChecks.push(new ge(null,t)):s.canDeactivateChecks.push(new ge(null,t))}function ze(i){return typeof i=="function"}function Es(i){return typeof i=="boolean"}function As(i){return i&&ze(i.canLoad)}function Ts(i){return i&&ze(i.canActivate)}function Ds(i){return i&&ze(i.canActivateChild)}function Ns(i){return i&&ze(i.canDeactivate)}function Os(i){return i&&ze(i.canMatch)}function yi(i){return i instanceof _r||i?.name==="EmptyError"}var et=Symbol("INITIAL_VALUE");function Ce(){return B(i=>Ct(i.map(r=>r.pipe(ue(1),xr(et)))).pipe(w(r=>{for(let s of r)if(s!==!0){if(s===et)return et;if(s===!1||s instanceof K)return s}return!0}),he(r=>r!==et),ue(1)))}function Ps(i,r){return U(s=>{let{targetSnapshot:e,currentSnapshot:t,guards:{canActivateChecks:n,canDeactivateChecks:a}}=s;return a.length===0&&n.length===0?m(D(f({},s),{guardsResult:!0})):$s(a,e,t,i).pipe(U(c=>c&&Es(c)?Us(e,n,i,r):m(c)),w(c=>D(f({},s),{guardsResult:c})))})}function $s(i,r,s,e){return F(i).pipe(U(t=>zs(t.component,t.route,s,r,e)),V(t=>t!==!0,!0))}function Us(i,r,s,e){return F(r).pipe(be(t=>wr(Ls(t.route.parent,e),js(t.route,e),Hs(i,t.path,s),Fs(i,t.route,s))),V(t=>t!==!0,!0))}function js(i,r){return i!==null&&r&&r(new Qt(i)),m(!0)}function Ls(i,r){return i!==null&&r&&r(new Gt(i)),m(!0)}function Fs(i,r,s){let e=r.routeConfig?r.routeConfig.canActivate:null;if(!e||e.length===0)return m(!0);let t=e.map(n=>kt(()=>{let a=He(r)??s,c=ke(n,a),l=Ts(c)?c.canActivate(r,i):re(a,()=>c(r,i));return J(l).pipe(V())}));return m(t).pipe(Ce())}function Hs(i,r,s){let e=r[r.length-1],n=r.slice(0,r.length-1).reverse().map(a=>Ms(a)).filter(a=>a!==null).map(a=>kt(()=>{let c=a.guards.map(l=>{let o=He(a.node)??s,h=ke(l,o),u=Ds(h)?h.canActivateChild(e,i):re(o,()=>h(e,i));return J(u).pipe(V())});return m(c).pipe(Ce())}));return m(n).pipe(Ce())}function zs(i,r,s,e,t){let n=r&&r.routeConfig?r.routeConfig.canDeactivate:null;if(!n||n.length===0)return m(!0);let a=n.map(c=>{let l=He(r)??t,o=ke(c,l),h=Ns(o)?o.canDeactivate(i,r,s,e):re(l,()=>o(i,r,s,e));return J(h).pipe(V())});return m(a).pipe(Ce())}function Bs(i,r,s,e){let t=r.canLoad;if(t===void 0||t.length===0)return m(!0);let n=t.map(a=>{let c=ke(a,i),l=As(c)?c.canLoad(r,s):re(i,()=>c(r,s));return J(l)});return m(n).pipe(Ce(),_i(e))}function _i(i){return kr(R(r=>{if(ve(r))throw Si(i,r)}),w(r=>r===!0))}function qs(i,r,s,e){let t=r.canMatch;if(!t||t.length===0)return m(!0);let n=t.map(a=>{let c=ke(a,i),l=Os(c)?c.canMatch(r,s):re(i,()=>c(r,s));return J(l)});return m(n).pipe(Ce(),_i(e))}var Le=class{constructor(r){this.segmentGroup=r||null}},dt=class extends Error{constructor(r){super(),this.urlTree=r}};function de(i){return we(new Le(i))}function Ws(i){return we(new T(4e3,!1))}function Zs(i){return we(Ci(!1,j.GuardRejected))}var ir=class{constructor(r,s){this.urlSerializer=r,this.urlTree=s}lineralizeSegments(r,s){let e=[],t=s.root;for(;;){if(e=e.concat(t.segments),t.numberOfChildren===0)return m(e);if(t.numberOfChildren>1||!t.children[v])return Ws(r.redirectTo);t=t.children[v]}}applyRedirectCommands(r,s,e){let t=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),r,e);if(s.startsWith("/"))throw new dt(t);return t}applyRedirectCreateUrlTree(r,s,e,t){let n=this.createSegmentGroup(r,s.root,e,t);return new K(n,this.createQueryParams(s.queryParams,this.urlTree.queryParams),s.fragment)}createQueryParams(r,s){let e={};return Object.entries(r).forEach(([t,n])=>{if(typeof n=="string"&&n.startsWith(":")){let c=n.substring(1);e[t]=s[c]}else e[t]=n}),e}createSegmentGroup(r,s,e,t){let n=this.createSegments(r,s.segments,e,t),a={};return Object.entries(s.children).forEach(([c,l])=>{a[c]=this.createSegmentGroup(r,l,e,t)}),new y(n,a)}createSegments(r,s,e,t){return s.map(n=>n.path.startsWith(":")?this.findPosParam(r,n,t):this.findOrReturn(n,e))}findPosParam(r,s,e){let t=e[s.path.substring(1)];if(!t)throw new T(4001,!1);return t}findOrReturn(r,s){let e=0;for(let t of s){if(t.path===r.path)return s.splice(e),t;e++}return r}},sr={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Gs(i,r,s,e,t){let n=fr(i,r,s);return n.matched?(e=_s(r,e),qs(e,r,s,t).pipe(w(a=>a===!0?n:f({},sr)))):m(n)}function fr(i,r,s){if(r.path==="**")return Vs(s);if(r.path==="")return r.pathMatch==="full"&&(i.hasChildren()||s.length>0)?f({},sr):{matched:!0,consumedSegments:[],remainingSegments:s,parameters:{},positionalParamSegments:{}};let t=(r.matcher||Bi)(s,i,r);if(!t)return f({},sr);let n={};Object.entries(t.posParams??{}).forEach(([c,l])=>{n[c]=l.path});let a=t.consumed.length>0?f(f({},n),t.consumed[t.consumed.length-1].parameters):n;return{matched:!0,consumedSegments:t.consumed,remainingSegments:s.slice(t.consumed.length),parameters:a,positionalParamSegments:t.posParams??{}}}function Vs(i){return{matched:!0,parameters:i.length>0?ti(i).parameters:{},consumedSegments:i,remainingSegments:[],positionalParamSegments:{}}}function Xr(i,r,s,e){return s.length>0&&Ys(i,s,e)?{segmentGroup:new y(r,Ks(e,new y(s,i.children))),slicedSegments:[]}:s.length===0&&Js(i,s,e)?{segmentGroup:new y(i.segments,Qs(i,s,e,i.children)),slicedSegments:s}:{segmentGroup:new y(i.segments,i.children),slicedSegments:s}}function Qs(i,r,s,e){let t={};for(let n of s)if(pt(i,r,n)&&!e[W(n)]){let a=new y([],{});t[W(n)]=a}return f(f({},e),t)}function Ks(i,r){let s={};s[v]=r;for(let e of i)if(e.path===""&&W(e)!==v){let t=new y([],{});s[W(e)]=t}return s}function Ys(i,r,s){return s.some(e=>pt(i,r,e)&&W(e)!==v)}function Js(i,r,s){return s.some(e=>pt(i,r,e))}function pt(i,r,s){return(i.hasChildren()||r.length>0)&&s.pathMatch==="full"?!1:s.path===""}function Xs(i,r,s,e){return W(i)!==e&&(e===v||!pt(r,s,i))?!1:fr(r,i,s).matched}function en(i,r,s){return r.length===0&&!i.children[s]}var nr=class{};function tn(i,r,s,e,t,n,a="emptyOnly"){return new ar(i,r,s,e,t,a,n).recognize()}var rn=31,ar=class{constructor(r,s,e,t,n,a,c){this.injector=r,this.configLoader=s,this.rootComponentType=e,this.config=t,this.urlTree=n,this.paramsInheritanceStrategy=a,this.urlSerializer=c,this.applyRedirects=new ir(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(r){return new T(4002,`'${r.segmentGroup}'`)}recognize(){let r=Xr(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(r).pipe(w(s=>{let e=new Ue([],Object.freeze({}),Object.freeze(f({},this.urlTree.queryParams)),this.urlTree.fragment,{},v,this.rootComponentType,null,{}),t=new O(e,s),n=new lt("",t),a=cs(e,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,n.url=this.urlSerializer.serialize(a),this.inheritParamsAndData(n._root,null),{state:n,tree:a}}))}match(r){return this.processSegmentGroup(this.injector,this.config,r,v).pipe(le(e=>{if(e instanceof dt)return this.urlTree=e.urlTree,this.match(e.urlTree.root);throw e instanceof Le?this.noMatchError(e):e}))}inheritParamsAndData(r,s){let e=r.value,t=hr(e,s,this.paramsInheritanceStrategy);e.params=Object.freeze(t.params),e.data=Object.freeze(t.data),r.children.forEach(n=>this.inheritParamsAndData(n,e))}processSegmentGroup(r,s,e,t){return e.segments.length===0&&e.hasChildren()?this.processChildren(r,s,e):this.processSegment(r,s,e,e.segments,t,!0).pipe(w(n=>n instanceof O?[n]:[]))}processChildren(r,s,e){let t=[];for(let n of Object.keys(e.children))n==="primary"?t.unshift(n):t.push(n);return F(t).pipe(be(n=>{let a=e.children[n],c=ws(s,n);return this.processSegmentGroup(r,c,a,n)}),Mr((n,a)=>(n.push(...a),n)),yt(null),Rr(),U(n=>{if(n===null)return de(e);let a=wi(n);return sn(a),m(a)}))}processSegment(r,s,e,t,n,a){return F(s).pipe(be(c=>this.processSegmentAgainstRoute(c._injector??r,s,c,e,t,n,a).pipe(le(l=>{if(l instanceof Le)return m(null);throw l}))),V(c=>!!c),le(c=>{if(yi(c))return en(e,t,n)?m(new nr):de(e);throw c}))}processSegmentAgainstRoute(r,s,e,t,n,a,c){return Xs(e,t,n,a)?e.redirectTo===void 0?this.matchSegmentAgainstRoute(r,t,e,n,a):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(r,t,s,e,n,a):de(t):de(t)}expandSegmentAgainstRouteUsingRedirect(r,s,e,t,n,a){let{matched:c,consumedSegments:l,positionalParamSegments:o,remainingSegments:h}=fr(s,t,n);if(!c)return de(s);t.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>rn&&(this.allowRedirects=!1));let u=this.applyRedirects.applyRedirectCommands(l,t.redirectTo,o);return this.applyRedirects.lineralizeSegments(t,u).pipe(U(d=>this.processSegment(r,e,s,d.concat(h),a,!1)))}matchSegmentAgainstRoute(r,s,e,t,n){let a=Gs(s,e,t,r,this.urlSerializer);return e.path==="**"&&(s.children={}),a.pipe(B(c=>c.matched?(r=e._injector??r,this.getChildConfig(r,e,t).pipe(B(({routes:l})=>{let o=e._loadedInjector??r,{consumedSegments:h,remainingSegments:u,parameters:d}=c,S=new Ue(h,d,Object.freeze(f({},this.urlTree.queryParams)),this.urlTree.fragment,an(e),W(e),e.component??e._loadedComponent??null,e,on(e)),{segmentGroup:C,slicedSegments:_}=Xr(s,h,u,l);if(_.length===0&&C.hasChildren())return this.processChildren(o,l,C).pipe(w(A=>A===null?null:new O(S,A)));if(l.length===0&&_.length===0)return m(new O(S,[]));let I=W(e)===n;return this.processSegment(o,l,C,_,I?v:n,!0).pipe(w(A=>new O(S,A instanceof O?[A]:[])))}))):de(s)))}getChildConfig(r,s,e){return s.children?m({routes:s.children,injector:r}):s.loadChildren?s._loadedRoutes!==void 0?m({routes:s._loadedRoutes,injector:s._loadedInjector}):Bs(r,s,e,this.urlSerializer).pipe(U(t=>t?this.configLoader.loadChildren(r,s).pipe(R(n=>{s._loadedRoutes=n.routes,s._loadedInjector=n.injector})):Zs(s))):m({routes:[],injector:r})}};function sn(i){i.sort((r,s)=>r.value.outlet===v?-1:s.value.outlet===v?1:r.value.outlet.localeCompare(s.value.outlet))}function nn(i){let r=i.value.routeConfig;return r&&r.path===""}function wi(i){let r=[],s=new Set;for(let e of i){if(!nn(e)){r.push(e);continue}let t=r.find(n=>e.value.routeConfig===n.value.routeConfig);t!==void 0?(t.children.push(...e.children),s.add(t)):r.push(e)}for(let e of s){let t=wi(e.children);r.push(new O(e.value,t))}return r.filter(e=>!s.has(e))}function an(i){return i.data||{}}function on(i){return i.resolve||{}}function cn(i,r,s,e,t,n){return U(a=>tn(i,r,s,e,a.extractedUrl,t,n).pipe(w(({state:c,tree:l})=>D(f({},a),{targetSnapshot:c,urlAfterRedirects:l}))))}function hn(i,r){return U(s=>{let{targetSnapshot:e,guards:{canActivateChecks:t}}=s;if(!t.length)return m(s);let n=new Set(t.map(l=>l.route)),a=new Set;for(let l of n)if(!a.has(l))for(let o of bi(l))a.add(o);let c=0;return F(a).pipe(be(l=>n.has(l)?ln(l,e,i,r):(l.data=hr(l,l.parent,i).resolve,m(void 0))),R(()=>c++),_t(1),U(l=>c===a.size?m(s):te))})}function bi(i){let r=i.children.map(s=>bi(s)).flat();return[i,...r]}function ln(i,r,s,e){let t=i.routeConfig,n=i._resolve;return t?.title!==void 0&&!mi(t)&&(n[Fe]=t.title),un(n,i,r,e).pipe(w(a=>(i._resolvedData=a,i.data=hr(i,i.parent,s).resolve,null)))}function un(i,r,s,e){let t=$t(i);if(t.length===0)return m({});let n={};return F(t).pipe(U(a=>dn(i[a],r,s,e).pipe(V(),R(c=>{n[a]=c}))),_t(1),br(n),le(a=>yi(a)?te:we(a)))}function dn(i,r,s,e){let t=He(r)??e,n=ke(i,t),a=n.resolve?n.resolve(r,s):re(t,()=>n(r,s));return J(a)}function Ot(i){return B(r=>{let s=i(r);return s?F(s).pipe(w(()=>r)):m(r)})}var Ri=(()=>{let r=class r{buildTitle(e){let t,n=e.root;for(;n!==void 0;)t=this.getResolvedTitleForRoute(n)??t,n=n.children.find(a=>a.outlet===v);return t}getResolvedTitleForRoute(e){return e.data[Fe]}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=M({token:r,factory:()=>p(fn),providedIn:"root"});let i=r;return i})(),fn=(()=>{let r=class r extends Ri{constructor(e){super(),this.title=e}updateTitle(e){let t=this.buildTitle(e);t!==void 0&&this.title.setTitle(t)}};r.\u0275fac=function(t){return new(t||r)(Tr(qr))},r.\u0275prov=M({token:r,factory:r.\u0275fac,providedIn:"root"});let i=r;return i})(),pr=new N("",{providedIn:"root",factory:()=>({})}),gr=new N(""),pn=(()=>{let r=class r{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=p(Et)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return m(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let t=J(e.loadComponent()).pipe(w(Mi),R(a=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=a}),qe(()=>{this.componentLoaders.delete(e)})),n=new St(t,()=>new ee).pipe(vt());return this.componentLoaders.set(e,n),n}loadChildren(e,t){if(this.childrenLoaders.get(t))return this.childrenLoaders.get(t);if(t._loadedRoutes)return m({routes:t._loadedRoutes,injector:t._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(t);let a=gn(t,this.compiler,e,this.onLoadEndListener).pipe(qe(()=>{this.childrenLoaders.delete(t)})),c=new St(a,()=>new ee).pipe(vt());return this.childrenLoaders.set(t,c),c}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=M({token:r,factory:r.\u0275fac,providedIn:"root"});let i=r;return i})();function gn(i,r,s,e){return J(i.loadChildren()).pipe(w(Mi),U(t=>t instanceof Or||Array.isArray(t)?m(t):F(r.compileModuleAsync(t))),w(t=>{e&&e(i);let n,a,c=!1;return Array.isArray(t)?(a=t,c=!0):(n=t.create(s).injector,a=n.get(gr,[],{optional:!0,self:!0}).flat()),{routes:a.map(dr),injector:n}}))}function mn(i){return i&&typeof i=="object"&&"default"in i}function Mi(i){return mn(i)?i.default:i}var mr=(()=>{let r=class r{};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=M({token:r,factory:()=>p(vn),providedIn:"root"});let i=r;return i})(),vn=(()=>{let r=class r{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=M({token:r,factory:r.\u0275fac,providedIn:"root"});let i=r;return i})(),Sn=new N("");var Cn=(()=>{let r=class r{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new ee,this.transitionAbortSubject=new ee,this.configLoader=p(pn),this.environmentInjector=p(Ge),this.urlSerializer=p(cr),this.rootContexts=p(ft),this.location=p(Ye),this.inputBindingEnabled=p(ur,{optional:!0})!==null,this.titleStrategy=p(Ri),this.options=p(pr,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=p(mr),this.createViewTransition=p(Sn,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>m(void 0),this.rootComponentType=null;let e=n=>this.events.next(new Wt(n)),t=n=>this.events.next(new Zt(n));this.configLoader.onLoadEndListener=t,this.configLoader.onLoadStartListener=e}complete(){this.transitions?.complete()}handleNavigationRequest(e){let t=++this.navigationId;this.transitions?.next(D(f(f({},this.transitions.value),e),{id:t}))}setupNavigations(e,t,n){return this.transitions=new $({id:0,currentUrlTree:t,currentRawUrl:t,extractedUrl:this.urlHandlingStrategy.extract(t),urlAfterRedirects:this.urlHandlingStrategy.extract(t),rawUrl:t,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ae,restoredState:null,currentSnapshot:n.snapshot,targetSnapshot:null,currentRouterState:n,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(he(a=>a.id!==0),w(a=>D(f({},a),{extractedUrl:this.urlHandlingStrategy.extract(a.rawUrl)})),B(a=>{this.currentTransition=a;let c=!1,l=!1;return m(a).pipe(R(o=>{this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?D(f({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),B(o=>{let h=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=o.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!h&&u!=="reload"){let d="";return this.events.next(new ae(o.id,this.urlSerializer.serialize(o.rawUrl),d,Ft.IgnoredSameUrlNavigation)),o.resolve(null),te}if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return m(o).pipe(B(d=>{let S=this.transitions?.getValue();return this.events.next(new Ne(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),S!==this.transitions?.getValue()?te:Promise.resolve(d)}),cn(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),R(d=>{a.targetSnapshot=d.targetSnapshot,a.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=D(f({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let S=new ot(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(S)}));if(h&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:d,extractedUrl:S,source:C,restoredState:_,extras:I}=o,A=new Ne(d,this.urlSerializer.serialize(S),C,_);this.events.next(A);let Z=pi(this.rootComponentType).snapshot;return this.currentTransition=a=D(f({},o),{targetSnapshot:Z,urlAfterRedirects:S,extras:D(f({},I),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=S,m(a)}else{let d="";return this.events.next(new ae(o.id,this.urlSerializer.serialize(o.extractedUrl),d,Ft.IgnoredByUrlHandlingStrategy)),o.resolve(null),te}}),R(o=>{let h=new Ht(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(h)}),w(o=>(this.currentTransition=a=D(f({},o),{guards:Rs(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),a)),Ps(this.environmentInjector,o=>this.events.next(o)),R(o=>{if(a.guardsResult=o.guardsResult,ve(o.guardsResult))throw Si(this.urlSerializer,o.guardsResult);let h=new zt(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(h)}),he(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",j.GuardRejected),!1)),Ot(o=>{if(o.guards.canActivateChecks.length)return m(o).pipe(R(h=>{let u=new Bt(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(u)}),B(h=>{let u=!1;return m(h).pipe(hn(this.paramsInheritanceStrategy,this.environmentInjector),R({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(h,"",j.NoDataFromResolver)}}))}),R(h=>{let u=new qt(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(u)}))}),Ot(o=>{let h=u=>{let d=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(u.routeConfig).pipe(R(S=>{u.component=S}),w(()=>{})));for(let S of u.children)d.push(...h(S));return d};return Ct(h(o.targetSnapshot.root)).pipe(yt(null),ue(1))}),Ot(()=>this.afterPreactivation()),B(()=>{let{currentSnapshot:o,targetSnapshot:h}=a,u=this.createViewTransition?.(this.environmentInjector,o.root,h.root);return u?F(u).pipe(w(()=>a)):m(a)}),w(o=>{let h=vs(e.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=a=D(f({},o),{targetRouterState:h}),this.currentNavigation.targetRouterState=h,a}),R(()=>{this.events.next(new Pe)}),bs(this.rootContexts,e.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),ue(1),R({next:o=>{c=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ne(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{c=!0}}),Ir(this.transitionAbortSubject.pipe(R(o=>{throw o}))),qe(()=>{!c&&!l&&this.cancelNavigationTransition(a,"",j.SupersededByNewNavigation),this.currentTransition?.id===a.id&&(this.currentNavigation=null,this.currentTransition=null)}),le(o=>{if(l=!0,ki(o))this.events.next(new Y(a.id,this.urlSerializer.serialize(a.extractedUrl),o.message,o.cancellationCode)),ks(o)?this.events.next(new $e(o.url)):a.resolve(!1);else{this.events.next(new Oe(a.id,this.urlSerializer.serialize(a.extractedUrl),o,a.targetSnapshot??void 0));try{a.resolve(e.errorHandler(o))}catch(h){this.options.resolveNavigationPromiseOnError?a.resolve(!1):a.reject(h)}}return te}))}))}cancelNavigationTransition(e,t,n){let a=new Y(e.id,this.urlSerializer.serialize(e.extractedUrl),t,n);this.events.next(a),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=M({token:r,factory:r.\u0275fac,providedIn:"root"});let i=r;return i})();function kn(i){return i!==Ae}var yn=(()=>{let r=class r{};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=M({token:r,factory:()=>p(_n),providedIn:"root"});let i=r;return i})(),or=class{shouldDetach(r){return!1}store(r,s){}shouldAttach(r){return!1}retrieve(r){return null}shouldReuseRoute(r,s){return r.routeConfig===s.routeConfig}},_n=(()=>{let r=class r extends or{};r.\u0275fac=(()=>{let e;return function(n){return(e||(e=Re(r)))(n||r)}})(),r.\u0275prov=M({token:r,factory:r.\u0275fac,providedIn:"root"});let i=r;return i})(),xi=(()=>{let r=class r{};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=M({token:r,factory:()=>p(wn),providedIn:"root"});let i=r;return i})(),wn=(()=>{let r=class r extends xi{constructor(){super(...arguments),this.location=p(Ye),this.urlSerializer=p(cr),this.options=p(pr,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=p(mr),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new K,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=pi(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(t=>{t.type==="popstate"&&e(t.url,t.state)})}handleRouterEvent(e,t){if(e instanceof Ne)this.stateMemento=this.createStateMemento();else if(e instanceof ae)this.rawUrlTree=t.initialUrl;else if(e instanceof ot){if(this.urlUpdateStrategy==="eager"&&!t.extras.skipLocationChange){let n=this.urlHandlingStrategy.merge(t.finalUrl,t.initialUrl);this.setBrowserUrl(n,t)}}else e instanceof Pe?(this.currentUrlTree=t.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(t.finalUrl,t.initialUrl),this.routerState=t.targetRouterState,this.urlUpdateStrategy==="deferred"&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,t))):e instanceof Y&&(e.code===j.GuardRejected||e.code===j.NoDataFromResolver)?this.restoreHistory(t):e instanceof Oe?this.restoreHistory(t,!0):e instanceof ne&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,t){let n=this.urlSerializer.serialize(e);if(this.location.isCurrentPathEqualTo(n)||t.extras.replaceUrl){let a=this.browserPageId,c=f(f({},t.extras.state),this.generateNgRouterState(t.id,a));this.location.replaceState(n,"",c)}else{let a=f(f({},t.extras.state),this.generateNgRouterState(t.id,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(e,t=!1){if(this.canceledNavigationResolution==="computed"){let n=this.browserPageId,a=this.currentPageId-n;a!==0?this.location.historyGo(a):this.currentUrlTree===e.finalUrl&&a===0&&(this.resetState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(t&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,t){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:t}:{navigationId:e}}};r.\u0275fac=(()=>{let e;return function(n){return(e||(e=Re(r)))(n||r)}})(),r.\u0275prov=M({token:r,factory:r.\u0275fac,providedIn:"root"});let i=r;return i})(),Ie=function(i){return i[i.COMPLETE=0]="COMPLETE",i[i.FAILED=1]="FAILED",i[i.REDIRECTING=2]="REDIRECTING",i}(Ie||{});function bn(i,r){i.events.pipe(he(s=>s instanceof ne||s instanceof Y||s instanceof Oe||s instanceof ae),w(s=>s instanceof ne||s instanceof ae?Ie.COMPLETE:(s instanceof Y?s.code===j.Redirect||s.code===j.SupersededByNewNavigation:!1)?Ie.REDIRECTING:Ie.FAILED),he(s=>s!==Ie.REDIRECTING),ue(1)).subscribe(()=>{r()})}function Rn(i){throw i}var Mn={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},xn={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Ii=(()=>{let r=class r{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=p(Fr),this.stateManager=p(xi),this.options=p(pr,{optional:!0})||{},this.pendingTasks=p($r),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=p(Cn),this.urlSerializer=p(cr),this.location=p(Ye),this.urlHandlingStrategy=p(mr),this._events=new ee,this.errorHandler=this.options.errorHandler||Rn,this.navigated=!1,this.routeReuseStrategy=p(yn),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=p(gr,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!p(ur,{optional:!0}),this.eventsSubscription=new Cr,this.isNgZoneEnabled=p(Qe)instanceof Qe&&Qe.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(t=>{try{let n=this.navigationTransitions.currentTransition,a=this.navigationTransitions.currentNavigation;if(n!==null&&a!==null){if(this.stateManager.handleRouterEvent(t,a),t instanceof Y&&t.code!==j.Redirect&&t.code!==j.SupersededByNewNavigation)this.navigated=!0;else if(t instanceof ne)this.navigated=!0;else if(t instanceof $e){let c=this.urlHandlingStrategy.merge(t.url,n.currentRawUrl),l={info:n.extras.info,skipLocationChange:n.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||kn(n.source)};this.scheduleNavigation(c,Ae,null,l,{resolve:n.resolve,reject:n.reject,promise:n.promise})}}En(t)&&this._events.next(t)}catch(n){this.navigationTransitions.transitionAbortSubject.next(n)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ae,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,t)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(e,"popstate",t)},0)})}navigateToSyncWithBrowser(e,t,n){let a={replaceUrl:!0},c=n?.navigationId?n:null;if(n){let o=f({},n);delete o.navigationId,delete o.\u0275routerPageId,Object.keys(o).length!==0&&(a.state=o)}let l=this.parseUrl(e);this.scheduleNavigation(l,t,c,a)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(dr),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,t={}){let{relativeTo:n,queryParams:a,fragment:c,queryParamsHandling:l,preserveFragment:o}=t,h=o?this.currentUrlTree.fragment:c,u=null;switch(l){case"merge":u=f(f({},this.currentUrlTree.queryParams),a);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=a||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let S=n?n.snapshot:this.routerState.snapshot.root;d=li(S)}catch{(typeof e[0]!="string"||!e[0].startsWith("/"))&&(e=[]),d=this.currentUrlTree.root}return ui(d,e,u,h??null)}navigateByUrl(e,t={skipLocationChange:!1}){let n=ve(e)?e:this.parseUrl(e),a=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(a,Ae,null,t)}navigate(e,t={skipLocationChange:!1}){return In(e),this.navigateByUrl(this.createUrlTree(e,t),t)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,t){let n;if(t===!0?n=f({},Mn):t===!1?n=f({},xn):n=t,ve(e))return Qr(this.currentUrlTree,e,n);let a=this.parseUrl(e);return Qr(this.currentUrlTree,a,n)}removeEmptyProps(e){return Object.entries(e).reduce((t,[n,a])=>(a!=null&&(t[n]=a),t),{})}scheduleNavigation(e,t,n,a,c){if(this.disposed)return Promise.resolve(!1);let l,o,h;c?(l=c.resolve,o=c.reject,h=c.promise):h=new Promise((d,S)=>{l=d,o=S});let u=this.pendingTasks.add();return bn(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:t,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:a,resolve:l,reject:o,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(d=>Promise.reject(d))}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=M({token:r,factory:r.\u0275fac,providedIn:"root"});let i=r;return i})();function In(i){for(let r=0;r<i.length;r++)if(i[r]==null)throw new T(4008,!1)}function En(i){return!(i instanceof Pe)&&!(i instanceof $e)}var An=new N("");function Fa(i,...r){return Ze([{provide:gr,multi:!0,useValue:i},[],{provide:Se,useFactory:Tn,deps:[Ii]},{provide:zr,multi:!0,useFactory:Dn},r.map(s=>s.\u0275providers)])}function Tn(i){return i.routerState.root}function Dn(){let i=p(Dr);return r=>{let s=i.get(Br);if(r!==s.components[0])return;let e=i.get(Ii),t=i.get(Nn);i.get(On)===1&&e.initialNavigation(),i.get(Pn,null,wt.Optional)?.setUpPreloading(),i.get(An,null,wt.Optional)?.init(),e.resetRootComponentType(s.componentTypes[0]),t.closed||(t.next(),t.complete(),t.unsubscribe())}}var Nn=new N("",{factory:()=>new ee}),On=new N("",{providedIn:"root",factory:()=>1});var Pn=new N("");export{Se as a,ms as b,Ii as c,Fa as d,Gn as e,Vn as f};
